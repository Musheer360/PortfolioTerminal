<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Musheer Alam</title>
        <meta
            name="description"
            content="Explore Musheer Alam's terminal themed portfolio. Discover expertise in cybersecurity, cloud, and AI. Navigate projects and connect with a tech innovator."
        />
        <meta name="author" content="Musheer Alam" />
        <link rel="canonical" href="https://www.musheer360.com" />
        <meta property="og:title" content="Musheer Alam" />
        <meta
            property="og:description"
            content="Explore Musheer Alam's terminal themed portfolio. Discover expertise in cybersecurity, cloud, and AI. Navigate projects and connect with a tech innovator."
        />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://www.musheer360.com" />
        <meta
            property="og:image"
            content="https://www.musheer360.com/banner.png"
        />
        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:title" content="Musheer Alam" />
        <meta
            name="twitter:description"
            content="Explore Musheer Alam's terminal themed portfolio. Discover expertise in cybersecurity, cloud, and AI. Navigate projects and connect with a tech innovator."
        />
        <meta
            name="twitter:image"
            content="https://www.musheer360.com/banner.png"
        />
        <link
            rel="icon"
            href="https://www.musheer360.com/favicon.ico"
            type="image/x-icon"
        />
        <script type="application/ld+json">
            {
                "@context": "http://schema.org",
                "@type": "WebPage",
                "name": "Musheer Alam",
                "description": "Portfolio showcasing the skills and projects of Musheer Alam, a Computer Science student passionate about technology, AI, cybersecurity, Linux, and cloud computing.",
                "url": "https://www.musheer360.com",
                "mainEntity": {
                    "@type": "Person",
                    "name": "Musheer Alam",
                    "url": "https://www.musheer360.com",
                    "sameAs": [
                        "https://linkedin.com/in/musheer360",
                        "https://github.com/musheer360",
                        "https://x.com/musheer360",
                        "https://musheer360.tech",
                        "https://musheer360.me"
                    ],
                    "jobTitle": "Aspiring Cybersecurity Expert",
                    "skills": [
                        "Cybersecurity",
                        "Network Security",
                        "Web App Security",
                        "Programming",
                        "Linux Administration",
                        "Cloud Computing"
                    ]
                },
                "mainContentOfPage": {
                    "@type": "WebPageElement",
                    "cssSelector": "#terminal"
                },
                "relatedLink": [
                    "https://linktr.ee/BlankSlateWeb",
                    "https://github.com/musheer360/QuoteSlate",
                    "https://github.com/musheer360/NovaChat",
                    "https://web.musheer360.com"
                ],
                "hasPart": [
                    {
                        "@type": "SoftwareApplication",
                        "name": "BlankSlate",
                        "url": "https://linktr.ee/BlankSlateWeb",
                        "description": "Minimalistic new tab extension available for Chrome, Edge, and Firefox.",
                        "applicationCategory": "Browser Extension",
                        "operatingSystem": "Chrome, Firefox, Edge",
                        "offers": {
                            "@type": "Offer",
                            "price": "0",
                            "priceCurrency": "USD"
                        }
                    },
                    {
                        "@type": "SoftwareSourceCode",
                        "name": "QuoteSlate",
                        "codeRepository": "https://github.com/musheer360/QuoteSlate",
                        "description": "API for inspirational quotes, built with Node.js and Postgres, currently hosts over 2,600 quotes.",
                        "programmingLanguage": "Node.js"
                    },
                    {
                        "@type": "MobileApplication",
                        "name": "NovaChat",
                        "url": "https://github.com/musheer360/NovaChat",
                        "description": "AI-powered Android chat app using Google's Gemini API for NLP with a simple and intuitive interface.",
                        "operatingSystem": "Android",
                        "applicationCategory": "ChatApplication"
                    },
                    {
                        "@type": "TechArticle",
                        "name": "Sony Xperia M Homelab",
                        "url": "https://web.musheer360.com",
                        "description": "Revived an 11-year-old Sony Xperia M to run LineageOS with Termux as a mini server for tech experiments.",
                        "about": {
                            "@type": "Thing",
                            "name": "Homelab"
                        }
                    }
                ]
            }
        </script>
        <style>
            * {
                cursor: default !important;
            }
            body,
            html {
                margin: 0;
                padding: 0;
                height: 100%;
                background-color: #000;
                color: #0f0;
                font-family: "Courier New", monospace;
                overflow: hidden;
                user-select: none;
            }
            #terminal {
                height: 100vh;
                padding: 20px;
                box-sizing: border-box;
                overflow-y: scroll;
                scroll-behavior: auto;
                scrollbar-width: none;
                -ms-overflow-style: none;
                position: relative;
            }
            #terminal::-webkit-scrollbar {
                display: none;
            }
            #input-line {
                display: flex;
                align-items: center;
            }
            #prompt {
                color: #0f0;
                margin-right: 10px;
            }
            #input-container {
                position: relative;
                flex-grow: 1;
            }
            #user-input {
                background: 0 0;
                border: none;
                color: #0f0;
                font-family: "Courier New", monospace;
                font-size: 16px;
                width: 100%;
                outline: 0;
                padding: 0;
                margin: 0;
            }
            #fake-input {
                position: absolute;
                top: 0;
                left: 0;
                color: transparent;
                pointer-events: none;
                white-space: pre;
            }
            .output {
                margin-bottom: 10px;
                white-space: pre-wrap;
                word-wrap: break-word;
            }
            .error {
                color: red;
            }
            .success {
                color: #0f0;
            }
            .highlight {
                color: #ff0;
            }
            .error-highlight {
                color: red;
            }
            a {
                color: #0ff;
                text-decoration: none;
            }
            a:hover {
                text-decoration: underline;
            }
            .visually-hidden {
                position: absolute;
                width: 1px;
                height: 1px;
                padding: 0;
                margin: -1px;
                overflow: hidden;
                clip: rect(0, 0, 0, 0);
                white-space: nowrap;
                border: 0;
            }
            @keyframes blink {
                0%,
                100% {
                    opacity: 1;
                }
                50% {
                    opacity: 0;
                }
            }
            #matrix-container {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                z-index: -1;
                opacity: 0;
                transition: opacity 0.5s ease;
                pointer-events: none;
            }
            #matrix-canvas {
                width: 100%;
                height: 100%;
            }
            .fullscreen {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                z-index: 1000;
                background-color: #000;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                color: #0f0;
                font-family: "Courier New", monospace;
            }
            .progress-container {
                width: 80%;
                max-width: 500px;
                height: 20px;
                background-color: #111;
                border: 1px solid #0f0;
                margin: 10px 0;
                position: relative;
            }
            .progress-bar {
                height: 100%;
                background-color: #0f0;
                width: 0%;
                transition: width 0.3s ease;
            }
            .ascii-art {
                white-space: pre;
                font-family: monospace;
                line-height: 1.2;
                text-align: center;
                margin: 20px 0;
            }
            .hidden {
                display: none;
            }
            .command-history {
                position: absolute;
                right: 20px;
                top: 50px;
                background-color: rgba(0, 0, 0, 0.8);
                border: 1px solid #0f0;
                padding: 10px;
                max-width: 200px;
                max-height: 300px;
                overflow-y: auto;
                z-index: 100;
                display: none;
            }
            .command-history-item {
                color: #0f0;
                padding: 2px 5px;
                cursor: pointer !important;
            }
            .command-history-item:hover {
                background-color: #0f01;
            }
            .htop-container {
                font-family: monospace;
                width: 100%;
                max-width: 800px;
                margin: 0 auto;
            }
            .htop-header {
                display: flex;
                justify-content: space-between;
                margin-bottom: 10px;
                padding: 5px;
                background-color: #111;
                border: 1px solid #333;
            }
            .htop-cpu-bars {
                display: flex;
                gap: 2px;
                margin-bottom: 10px;
            }
            .htop-cpu-bar {
                height: 15px;
                flex-grow: 1;
                background-color: #111;
                border: 1px solid #333;
                position: relative;
            }
            .htop-cpu-usage {
                height: 100%;
                background-color: #0f0;
                width: 0%;
                transition: width 0.5s ease;
            }
            .htop-memory-bar {
                height: 15px;
                width: 100%;
                background-color: #111;
                border: 1px solid #333;
                margin-bottom: 10px;
                position: relative;
            }
            .htop-memory-usage {
                height: 100%;
                background-color: #0a0;
                width: 0%;
                transition: width 0.5s ease;
            }
            .htop-process-table {
                width: 100%;
                border-collapse: collapse;
                font-size: 14px;
            }
            .htop-process-table th {
                text-align: left;
                padding: 5px;
                background-color: #111;
                border: 1px solid #333;
            }
            .htop-process-table td {
                padding: 3px 5px;
                border: 1px solid #222;
            }
            .htop-process-table tr:nth-child(even) {
                background-color: #0a0a0a;
            }
            .htop-process-table tr:hover {
                background-color: #111;
            }
            .neofetch-container {
                display: flex;
                font-family: monospace;
                padding: 10px;
                max-width: 800px;
            }
            .neofetch-logo {
                margin-right: 20px;
                color: #0f0;
                white-space: pre;
                line-height: 1.2;
            }
            .neofetch-info {
                flex-grow: 1;
            }
            .neofetch-info-line {
                margin-bottom: 5px;
                display: flex;
            }
            .neofetch-info-label {
                color: #0f0;
                margin-right: 10px;
                min-width: 100px;
            }
            .neofetch-info-value {
                color: #fff;
            }
            .weather-container {
                font-family: monospace;
                text-align: center;
                padding: 10px;
            }
            .weather-location {
                font-size: 18px;
                margin-bottom: 10px;
            }
            .weather-icon {
                font-size: 24px;
                margin-bottom: 10px;
                white-space: pre;
            }
            .weather-temp {
                font-size: 20px;
                margin-bottom: 5px;
            }
            .weather-desc {
                margin-bottom: 10px;
            }
            .weather-details {
                display: flex;
                justify-content: center;
                gap: 20px;
                margin-top: 10px;
            }
            .weather-detail {
                text-align: center;
            }
            .figlet-output {
                font-family: monospace;
                white-space: pre;
                line-height: 1.2;
                text-align: center;
                margin: 20px 0;
                color: #0f0;
            }
            @media (max-width: 600px) {
                #user-input,
                body {
                    font-size: 14px;
                }
                #terminal {
                    padding: 10px;
                }
                #prompt {
                    margin-right: 7.5px;
                }
                .command-history {
                    max-width: 150px;
                    right: 10px;
                    top: 40px;
                }
                .neofetch-container {
                    flex-direction: column;
                }
                .neofetch-logo {
                    margin-right: 0;
                    margin-bottom: 10px;
                    font-size: 10px;
                }
                .htop-process-table {
                    font-size: 12px;
                }
            }
        </style>
    </head>
    <body>
        <div id="terminal">
            <div id="initial-message" class="output success">Welcome to musheer360's web terminal.</div>
            <div id="help-message" class="output">Type 'help' for available commands.</div>
            <div id="command-output"></div>
            <div id="input-line">
                <span id="prompt">visitor@musheer360:~$</span>
                <div id="input-container">
                    <label for="user-input" class="visually-hidden"
                        >Enter command</label
                    >
                    <input
                        type="text"
                        id="user-input"
                        autocomplete="off"
                        autocapitalize="off"
                        autofocus
                        aria-label="Enter command"
                    />
                    <span id="fake-input"></span>
                </div>
            </div>
            <div id="command-history" class="command-history"></div>
        </div>
        <div id="matrix-container">
            <canvas id="matrix-canvas"></canvas>
        </div>
        <script>
            const commandOutput = document.getElementById("command-output");
            const userInput = document.getElementById("user-input");
            const fakeInput = document.getElementById("fake-input");
            const initialMessage = document.getElementById("initial-message");
            const helpMessage = document.getElementById("help-message");
            const terminal = document.getElementById("terminal");
            const matrixContainer = document.getElementById("matrix-container");
            const matrixCanvas = document.getElementById("matrix-canvas");
            const commandHistory = document.getElementById("command-history");

            let prompt = "visitor@musheer360:~$";
            let commandHistoryArray = [];
            let commandHistoryIndex = -1;
            let matrixActive = false;
            let currentTheme = "green"; // Default theme
            let currentCommand = null;
            let commandInterrupted = false;

            // Theme configurations
            const themes = {
                green: {
                    bg: "#000",
                    text: "#0f0",
                    highlight: "#ff0",
                    link: "#0ff",
                    error: "red",
                },
                blue: {
                    bg: "#001",
                    text: "#0af",
                    highlight: "#fff",
                    link: "#ff0",
                    error: "#f55",
                },
                amber: {
                    bg: "#100",
                    text: "#fa0",
                    highlight: "#ff0",
                    link: "#fff",
                    error: "#f55",
                },
                matrix: {
                    bg: "#000",
                    text: "#0f0",
                    highlight: "#fff",
                    link: "#0ff",
                    error: "#f55",
                    matrixBg: true,
                },
            };

            const commands = {
                help: () => `Available commands:
    about - Learn more about me
    skills - Discover what I can do
    projects - See what I've built
    contact - Get in touch with me
    clear - Clear the terminal screen (Ctrl+L)
    cmatrix - Digital rain animation
    neofetch - Display system information
    htop - Interactive process viewer
    weather - Show weather information
    figlet - Create ASCII text banners
    hack - Simulate a hacking sequence
    sudo - Try to gain root access
    arch - Display Arch Linux pride
    42 - The answer to everything
    ls -la - List all files
    cowsay - Make a cow say something
    history - Show command history (Ctrl+R)
    theme - Change terminal theme`,
                about: () => `I'm Musheer Alam, a Computer Science student
with a focus on Cybersecurity and Cloud Computing.

Currently working as a Research Intern at CloudThat in Bangalore,
where I co-architected "Kubeguard," a Helm-based Kubernetes security suite.

I hold several certifications including:
- AWS Certified Cloud Practitioner
- CompTIA Security+ (SY0-701)
- ISC2 Certified in Cybersecurity (CC)
- Google Cybersecurity Professional Certificate

When I'm not securing systems or coding,
I'm exploring new technologies and building
projects that solve real-world problems.

Oh, and did I mention? I use Arch BTW.`,
                skills: () => `Skills:

    • Cybersecurity & Risk Management:
      - Vulnerability Management, Threat Intelligence
      - Risk Assessment, CVE Analysis
      - Incident Response, Security Monitoring

    • Security Tools & Technologies:
      - Nessus, OpenVAS, Burp Suite, Metasploit
      - Wireshark, SIEM (Splunk), Nmap, OSINT Framework
      - Linux (Arch, Fedora, Debian-based: Kali, Ubuntu)

    • Programming & Scripting:
      - Python (for security automation), C++, Java
      - JavaScript, Node.js, Bash, PowerShell
      - SQL, YAML, JSON, AI-driven code orchestration

    • Cloud & DevOps:
      - AWS, Google Cloud Platform, Microsoft Azure
      - Vercel, Cloudflare, Docker, Kubernetes
      - Linux Administration, IaC, Git, CI/CD

    • Networking & System Security:
      - TCP/IP, Firewalls, IDS/IPS
      - Endpoint Security, Linux Security Hardening`,
                projects: () => `Some of my works:

    • <a href="https://linktr.ee/BlankSlateWeb" target="_blank">BlankSlate</a>:
      - Minimalistic new tab extension.
      - Provides a minimalist new tab page.
      - Supports Chrome, Edge, and Firefox.

    • <a href="https://github.com/musheer360/QuoteSlate" target="_blank">QuoteSlate (RESTful Quotes API)</a>:
      - Built with Node.js/Express on Vercel.
      - Defended against Layer 7 DDoS attack (300K+ req/day).
      - Enhanced with rate limiting, CORS, input validation.

    • <a href="https://github.com/musheer360/NovaChat" target="_blank">NovaChat</a>:
      - AI-powered Android chat app.
      - Uses Google's Gemini API for NLP.
      - Simple and intuitive interface.

    • <a href="https://web.musheer360.com" target="_blank">Privacy-Preserving Edge AI</a>:
      - Optimized TinyLLaMA 1.1B for mobile devices.
      - Leveraged LLaMA.cpp inference for ARMv8-A.
      - Implemented GGUF quantization (Q5_K_M).

    • <a href="https://web.musheer360.com" target="_blank">Secure Edge Server</a>:
      - Transformed obsolete smartphone into secure server.
      - Optimized LineageOS, Termux, and Magisk.
      - Hardened with SSH keys, firewall rules, Cloudflare Tunnel.`,
                contact: () => `Reach out:

    • Email: <a href="mailto:me@musheer360.com">me@musheer360.com</a>
    • GitHub: <a href="https://github.com/musheer360" target="_blank" rel="noopener">github.com/musheer360</a>
    • LinkedIn: <a href="https://linkedin.com/in/musheer360" target="_blank" rel="noopener">linkedin.com/in/musheer360</a>
    • X: <a href="https://x.com/musheer360" target="_blank" rel="noopener">x.com/musheer360</a>
    • YouTube: <a href="https://www.youtube.com/@TechAceYoutube" target="_blank" rel="noopener">youtube.com/@TechAceYoutube</a>`,
                clear: () => {
                    commandOutput.innerHTML = "";
                    initialMessage.style.display = "none";
                    helpMessage.style.display = "none";
                    return "";
                },
                cmatrix: () => {
                    currentCommand = "cmatrix";
                    commandInterrupted = false;
                    initEnhancedMatrix();
                    return "Digital rain activated. Press Ctrl+C to exit.";
                },
                neofetch: () => {
                    return generateNeofetch();
                },
                htop: () => {
                    currentCommand = "htop";
                    commandInterrupted = false;
                    return startHtop();
                },
                weather: () => {
                    return showWeather();
                },
                figlet: () => {
                    return `Usage: figlet [text]
Example: figlet Hello World`;
                },
                hack: () => {
                    const hackingSequence = createHackingSequence();
                    return hackingSequence;
                },
                sudo: () => {
                    const originalPrompt = prompt;
                    prompt = "root@musheer360:#";

                    setTimeout(() => {
                        prompt = originalPrompt;
                        addOutput("Root access expired. Back to regular user.");
                        scrollToBottom();
                    }, 5000);

                    return "This incident will be reported... just kidding!\nTemporary root access granted.";
                },
                arch: () => {
                    return `

     _____
    /  _  \\   ___________  ____
   /  /_\\  \\ /  _ \\_  __ \\/ ___\\
  /    |    (  <_> )  | \\/ /_/  >
  \\____|__  /\\____/|__|  \\___  /
          \\/            /_____/

I use Arch BTW... but you already knew that.

Fun facts about Arch Linux users:
- We can't go 5 minutes without mentioning we use Arch
- We spend more time customizing our system than using it
- We've broken and fixed our system so many times we could do it blindfolded
- We judge other Linux users by their distro choice
- We secretly enjoy the pain of manual configuration`;
                },
                42: () => {
                    return `The Answer to the Ultimate Question of Life, the Universe, and Everything is 42.

But what was the question? Here are some possibilities:

- How many times will you need to reinstall Arch before getting it right?
- What's the ideal number of browser tabs for a developer?
- How many cups of coffee are required to debug that one weird error?
- What's the perfect room temperature for a heated programming debate?
- How many mechanical keyboards does one really need?
- What percentage of code is actually comments and whitespace?`;
                },
                "ls -la": () => {
                    return `total 42
drwxr-xr-x  2 musheer360 users  4096 May 17 2025 .
drwxr-xr-x 21 root      root   4096 May 17 2025 ..
-rw-------  1 musheer360 users   220 May 17 2025 .bash_history
-rw-r--r--  1 musheer360 users  3771 May 17 2025 .bashrc
drwx------  2 musheer360 users  4096 May 17 2025 .cache
-rw-r--r--  1 musheer360 users   807 May 17 2025 .profile
drwxr-xr-x  2 musheer360 users  4096 May 17 2025 .ssh
-rw-r--r--  1 musheer360 users     0 May 17 2025 .sudo_as_admin_successful
-rw-r--r--  1 musheer360 users  1337 May 17 2025 about.txt
-rw-r--r--  1 musheer360 users  2600 May 17 2025 quotes.db
drwxr-xr-x  4 musheer360 users  4096 May 17 2025 projects
-rwxr-xr-x  1 musheer360 users  9001 May 17 2025 hack_the_planet.sh
-rw-r--r--  1 musheer360 users   420 May 17 2025 .hidden_easter_egg
drwxr-xr-x  2 musheer360 users  4096 May 17 2025 .secrets`;
                },
                cowsay: () => {
                    return createCowsay(
                        "Moo! I'm a terminal cow. Type 'cowsay [your message]' to make me say something!",
                    );
                },
                history: () => {
                    if (commandHistoryArray.length === 0) {
                        return "No commands in history yet.";
                    }

                    return commandHistoryArray
                        .map(
                            (cmd, index) =>
                                `${(index + 1).toString().padStart(4, " ")}  ${cmd}`,
                        )
                        .join("\n");
                },
                theme: () => {
                    return `Available themes:
    green - Classic terminal green (default)
    blue - Cool blue theme
    amber - Retro amber theme
    matrix - The Matrix theme

Usage: theme [name]`;
                },
            };

            // Special command handlers
            function handleSpecialCommands(command) {
                if (command.startsWith("cowsay ")) {
                    const message = command.substring(7).trim();
                    if (message) {
                        return createCowsay(message);
                    } else {
                        return commands.cowsay();
                    }
                }

                if (command.startsWith("figlet ")) {
                    const text = command.substring(7).trim();
                    if (text) {
                        return createFiglet(text);
                    } else {
                        return commands.figlet();
                    }
                }

                if (command.startsWith("theme ")) {
                    const themeName = command.substring(6).trim();
                    if (themes[themeName]) {
                        setTheme(themeName);
                        return `Theme changed to ${themeName}.`;
                    } else {
                        return `Theme '${themeName}' not found. Type 'theme' to see available themes.`;
                    }
                }

                if (command.startsWith("weather ")) {
                    const location = command.substring(8).trim();
                    if (location) {
                        return showWeather(location);
                    } else {
                        return commands.weather();
                    }
                }

                // Konami code Easter egg is handled separately in keydown events

                return null;
            }

            function executeCommand(cmd) {
                // Reset current command
                currentCommand = null;
                commandInterrupted = false;

                // Check for special command patterns first
                const specialOutput = handleSpecialCommands(cmd);
                if (specialOutput !== null) {
                    return { output: specialOutput, success: true };
                }

                // Then check for regular commands
                if (cmd in commands) {
                    return { output: commands[cmd](), success: true };
                } else {
                    return {
                        output: `Command not found: ${cmd}.
Type 'help' for the list of commands.`,
                        success: false,
                    };
                }
            }

            function updateFakeInput() {
                fakeInput.textContent = userInput.value;
            }

            function addNewPrompt() {
                commandOutput.innerHTML += `<div class="output"><span class="highlight">${prompt}</span></div>`;
                scrollToBottom();
            }

            function scrollToBottom() {
                terminal.scrollTop = terminal.scrollHeight;
            }

            function addOutput(text) {
                commandOutput.innerHTML += `<div class="output">${text}</div>`;
            }

            function handleCommand(command) {
                if (command === "") {
                    addNewPrompt();
                } else {
                    // Add to command history
                    if (commandHistoryArray.indexOf(command) === -1) {
                        commandHistoryArray.unshift(command);
                        if (commandHistoryArray.length > 50) {
                            commandHistoryArray.pop();
                        }
                    }
                    commandHistoryIndex = -1;

                    const { output, success } = executeCommand(command);
                    if (command !== "clear") {
                        const highlightClass = success
                            ? "highlight"
                            : "error-highlight";
                        commandOutput.innerHTML += `<div class="output"><span class="${highlightClass}">${prompt} ${command}</span></div>`;
                        commandOutput.innerHTML += `<div class="output">${output}</div>`;
                    }
                }
                userInput.value = "";
                fakeInput.textContent = "";
                scrollToBottom();
            }

            // Enhanced Matrix effect with more interesting visuals
            function initEnhancedMatrix() {
                const ctx = matrixCanvas.getContext("2d");
                matrixCanvas.width = window.innerWidth;
                matrixCanvas.height = window.innerHeight;

                const characters =
                    "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789$+-*/=%\"'#&_(),.;:?!\\|{}<>[]^~";
                const fontSize = 14;
                const columns = matrixCanvas.width / fontSize;

                const drops = [];
                const speeds = [];
                const colors = [];
                const sizes = [];

                for (let i = 0; i < columns; i++) {
                    drops[i] = Math.floor(Math.random() * -100);
                    speeds[i] = Math.random() * 1.5 + 0.5;
                    colors[i] = Math.random() > 0.1 ? "#0f0" : "#fff"; // Occasional white characters
                    sizes[i] = Math.random() > 0.05 ? fontSize : fontSize * 1.5; // Occasional larger characters
                }

                // Add special symbols that appear occasionally
                const specialSymbols = [];
                const numSpecialSymbols = 5;

                for (let i = 0; i < numSpecialSymbols; i++) {
                    specialSymbols.push({
                        x: Math.random() * matrixCanvas.width,
                        y: Math.random() * matrixCanvas.height,
                        size: fontSize * (Math.random() * 3 + 2),
                        opacity: 0,
                        targetOpacity: 0.8,
                        fadeSpeed: 0.01,
                        symbol: characters.charAt(
                            Math.floor(Math.random() * characters.length),
                        ),
                    });
                }

                matrixContainer.style.opacity = "1";
                matrixContainer.style.zIndex = "10";

                function drawMatrix() {
                    if (commandInterrupted || currentCommand !== "cmatrix") {
                        exitMatrix();
                        return;
                    }

                    ctx.fillStyle = "rgba(0, 0, 0, 0.05)";
                    ctx.fillRect(0, 0, matrixCanvas.width, matrixCanvas.height);

                    // Draw falling characters
                    for (let i = 0; i < drops.length; i++) {
                        const text = characters.charAt(
                            Math.floor(Math.random() * characters.length),
                        );

                        ctx.fillStyle = colors[i];
                        ctx.font = `${sizes[i]}px monospace`;

                        // Head of the stream is brighter
                        if (drops[i] > 0) {
                            ctx.fillStyle = "#fff";
                            ctx.fillText(
                                text,
                                i * fontSize,
                                drops[i] * fontSize,
                            );

                            // Rest of the stream
                            for (let j = 1; j < 20; j++) {
                                const y = drops[i] - j;
                                if (y < 0) break;

                                const opacity = 1 - j / 20;
                                ctx.fillStyle = `rgba(0, 255, 0, ${opacity})`;
                                ctx.fillText(
                                    characters.charAt(
                                        Math.floor(
                                            Math.random() * characters.length,
                                        ),
                                    ),
                                    i * fontSize,
                                    y * fontSize,
                                );
                            }
                        }

                        // Move drops
                        drops[i] += speeds[i];

                        // Reset when off screen with random delay
                        if (
                            drops[i] * fontSize > matrixCanvas.height &&
                            Math.random() > 0.975
                        ) {
                            drops[i] = 0;
                            speeds[i] = Math.random() * 1.5 + 0.5;
                            colors[i] = Math.random() > 0.1 ? "#0f0" : "#fff";
                            sizes[i] =
                                Math.random() > 0.05
                                    ? fontSize
                                    : fontSize * 1.5;
                        }
                    }

                    // Draw special symbols
                    for (let i = 0; i < specialSymbols.length; i++) {
                        const symbol = specialSymbols[i];

                        // Fade in/out
                        if (Math.random() > 0.99) {
                            symbol.targetOpacity =
                                symbol.opacity > 0.4 ? 0 : 0.8;
                        }

                        if (symbol.opacity < symbol.targetOpacity) {
                            symbol.opacity += symbol.fadeSpeed;
                        } else if (symbol.opacity > symbol.targetOpacity) {
                            symbol.opacity -= symbol.fadeSpeed;
                        }

                        // Draw symbol
                        ctx.fillStyle = `rgba(255, 255, 255, ${symbol.opacity})`;
                        ctx.font = `${symbol.size}px monospace`;
                        ctx.fillText(symbol.symbol, symbol.x, symbol.y);

                        // Occasionally change position
                        if (Math.random() > 0.995) {
                            symbol.x = Math.random() * matrixCanvas.width;
                            symbol.y = Math.random() * matrixCanvas.height;
                            symbol.symbol = characters.charAt(
                                Math.floor(Math.random() * characters.length),
                            );
                        }
                    }

                    // Add occasional horizontal glitch effect
                    if (Math.random() > 0.98) {
                        const y = Math.random() * matrixCanvas.height;
                        const height = Math.random() * 5 + 1;
                        const offset = Math.random() * 10 - 5;

                        ctx.drawImage(
                            matrixCanvas,
                            0,
                            y,
                            matrixCanvas.width,
                            height,
                            offset,
                            y,
                            matrixCanvas.width,
                            height,
                        );
                    }

                    requestAnimationFrame(drawMatrix);
                }

                drawMatrix();
            }

            function exitMatrix() {
                matrixContainer.style.opacity = "0";
                setTimeout(() => {
                    matrixContainer.style.zIndex = "-1";
                }, 500);

                if (currentCommand === "cmatrix") {
                    currentCommand = null;
                    if (commandInterrupted) {
                        addOutput("^C");
                    } else {
                        addOutput("Digital rain deactivated.");
                    }
                    scrollToBottom();
                }
            }

            // Hacking sequence
            function createHackingSequence() {
                const hackingDiv = document.createElement("div");
                hackingDiv.className = "fullscreen";
                document.body.appendChild(hackingDiv);

                const header = document.createElement("h2");
                header.textContent = "INITIALIZING HACK SEQUENCE";
                hackingDiv.appendChild(header);

                const progressContainer = document.createElement("div");
                progressContainer.className = "progress-container";
                hackingDiv.appendChild(progressContainer);

                const progressBar = document.createElement("div");
                progressBar.className = "progress-bar";
                progressContainer.appendChild(progressBar);

                const statusText = document.createElement("div");
                statusText.textContent = "Establishing connection...";
                hackingDiv.appendChild(statusText);

                const steps = [
                    "Establishing connection...",
                    "Bypassing firewall...",
                    "Accessing mainframe...",
                    "Decrypting security protocols...",
                    "Extracting data...",
                    "Covering tracks...",
                    "Hack complete! Access granted.",
                ];

                let currentStep = 0;

                const interval = setInterval(() => {
                    if (currentStep >= steps.length) {
                        clearInterval(interval);

                        setTimeout(() => {
                            const funnyMessage = document.createElement("div");
                            funnyMessage.innerHTML = `<div class="ascii-art">
  _______________________________
 /                               \\
|   CONGRATULATIONS, HACKER!     |
|                                |
|   You've successfully hacked   |
|   absolutely nothing.          |
|                                |
|   But you looked cool doing it.|
 \\_______________________________/
            </div>`;
                            hackingDiv.appendChild(funnyMessage);

                            setTimeout(() => {
                                document.body.removeChild(hackingDiv);
                            }, 5000);
                        }, 1000);

                        return;
                    }

                    statusText.textContent = steps[currentStep];
                    progressBar.style.width = `${((currentStep + 1) * 100) / steps.length}%`;
                    currentStep++;
                }, 800);

                return "Initiating hack sequence...";
            }

            // Cowsay implementation
            function createCowsay(message) {
                const lines = [];
                const maxLength = Math.min(40, Math.max(message.length, 10));

                // Create the speech bubble
                lines.push(" " + "_".repeat(maxLength + 2));

                if (message.length <= maxLength) {
                    lines.push(`/ ${message.padEnd(maxLength, " ")} \\`);
                } else {
                    // Split long messages
                    for (let i = 0; i < message.length; i += maxLength) {
                        const chunk = message.substr(i, maxLength);
                        if (i === 0) {
                            lines.push(`/ ${chunk.padEnd(maxLength, " ")} \\`);
                        } else if (i + maxLength >= message.length) {
                            lines.push(`\\ ${chunk.padEnd(maxLength, " ")} /`);
                        } else {
                            lines.push(`| ${chunk.padEnd(maxLength, " ")} |`);
                        }
                    }
                }

                lines.push(" " + "-".repeat(maxLength + 2));

                // Add the cow
                lines.push("        \\   ^__^");
                lines.push("         \\  (oo)\\_______");
                lines.push("            (__)\\       )\\/\\");
                lines.push("                ||----w |");
                lines.push("                ||     ||");

                return lines.join("\n");
            }

            // Theme switching
            function setTheme(themeName) {
                if (!themes[themeName]) return;

                const theme = themes[themeName];
                document.body.style.backgroundColor = theme.bg;
                document.body.style.color = theme.text;

                // Update CSS variables for dynamic elements
                document.documentElement.style.setProperty(
                    "--text-color",
                    theme.text,
                );
                document.documentElement.style.setProperty(
                    "--bg-color",
                    theme.bg,
                );
                document.documentElement.style.setProperty(
                    "--highlight-color",
                    theme.highlight,
                );
                document.documentElement.style.setProperty(
                    "--link-color",
                    theme.link,
                );
                document.documentElement.style.setProperty(
                    "--error-color",
                    theme.error,
                );

                // Update specific elements
                const links = document.querySelectorAll("a");
                links.forEach((link) => {
                    link.style.color = theme.link;
                });

                // Save current theme
                currentTheme = themeName;

                // Special case for matrix theme
                if (themeName === "matrix" && theme.matrixBg) {
                    matrixContainer.style.opacity = "0.1";
                    matrixContainer.style.zIndex = "0";
                    initEnhancedMatrix();

                    // Don't set currentCommand here to avoid interruption behavior
                    setTimeout(() => {
                        if (matrixContainer.style.opacity === "0.1") {
                            exitMatrix();
                        }
                    }, 30000);
                }
            }

            // Command history navigation
            function showCommandHistory() {
                if (commandHistoryArray.length === 0) return;

                commandHistory.innerHTML = "";
                commandHistory.style.display = "block";

                commandHistoryArray.forEach((cmd, index) => {
                    const item = document.createElement("div");
                    item.className = "command-history-item";
                    item.textContent = cmd;
                    item.addEventListener("click", () => {
                        userInput.value = cmd;
                        updateFakeInput();
                        commandHistory.style.display = "none";
                    });
                    commandHistory.appendChild(item);
                });
            }

            function hideCommandHistory() {
                commandHistory.style.display = "none";
            }

            // Konami code Easter egg
            let konamiSequence = [];
            const konamiCode = [
                "ArrowUp",
                "ArrowUp",
                "ArrowDown",
                "ArrowDown",
                "ArrowLeft",
                "ArrowRight",
                "ArrowLeft",
                "ArrowRight",
                "b",
                "a",
            ];

            function checkKonamiCode() {
                if (konamiSequence.join(",") === konamiCode.join(",")) {
                    konamiSequence = [];
                    activateKonamiEasterEgg();
                }
            }

            function activateKonamiEasterEgg() {
                addOutput(`<div class="highlight">
🎮 KONAMI CODE ACTIVATED! 🎮
Developer mode unlocked with additional commands:
- version - Display version information
- credits - Show credits
- debug - Toggle debug mode
</div>`);

                // Add the new secret commands
                commands.version = () =>
                    "Portfolio Terminal v2.0\nCodename: Hackerman's Delight\nBuild date: May 17, 2025";
                commands.credits = () =>
                    "Created by Musheer Alam\nEnhanced by Manus AI\nInspired by the coolest hackers in the world.";
                commands.debug = () =>
                    "Debug mode toggled. Check the console for more information.";

                // Apply a special visual effect
                document.body.classList.add("konami-active");
                setTimeout(() => {
                    document.body.classList.remove("konami-active");
                }, 3000);
            }

            // Neofetch implementation
            function generateNeofetch() {
                const browserInfo = detectBrowser();
                const logo = getBrowserLogo(browserInfo.browserName);

                const startTime =
                    new Date().getTime() - Math.floor(Math.random() * 3600000);
                const uptime = getUptime(startTime);

                const screenWidth = window.screen.width;
                const screenHeight = window.screen.height;
                const colorDepth = window.screen.colorDepth;

                const memoryInfo = navigator.deviceMemory
                    ? `${navigator.deviceMemory} GB`
                    : "Unknown";

                const neofetchHTML = `<div class="neofetch-container">
                    <div class="neofetch-logo">${logo}</div>
                    <div class="neofetch-info">
                        <div class="neofetch-info-line">
                            <div class="neofetch-info-label">OS:</div>
                            <div class="neofetch-info-value">${browserInfo.osName}</div>
                        </div>
                        <div class="neofetch-info-line">
                            <div class="neofetch-info-label">Host:</div>
                            <div class="neofetch-info-value">${browserInfo.browserName} ${browserInfo.browserVersion}</div>
                        </div>
                        <div class="neofetch-info-line">
                            <div class="neofetch-info-label">Kernel:</div>
                            <div class="neofetch-info-value">Web ${navigator.appVersion.split(" ")[0]}</div>
                        </div>
                        <div class="neofetch-info-line">
                            <div class="neofetch-info-label">Uptime:</div>
                            <div class="neofetch-info-value">${uptime}</div>
                        </div>
                        <div class="neofetch-info-line">
                            <div class="neofetch-info-label">Resolution:</div>
                            <div class="neofetch-info-value">${screenWidth}x${screenHeight}</div>
                        </div>
                        <div class="neofetch-info-line">
                            <div class="neofetch-info-label">Terminal:</div>
                            <div class="neofetch-info-value">musheer360-web-terminal</div>
                        </div>
                        <div class="neofetch-info-line">
                            <div class="neofetch-info-label">CPU:</div>
                            <div class="neofetch-info-value">WebAssembly ${navigator.hardwareConcurrency || "Unknown"} cores</div>
                        </div>
                        <div class="neofetch-info-line">
                            <div class="neofetch-info-label">Memory:</div>
                            <div class="neofetch-info-value">${memoryInfo}</div>
                        </div>
                        <div class="neofetch-info-line">
                            <div class="neofetch-info-label">Color Depth:</div>
                            <div class="neofetch-info-value">${colorDepth}-bit</div>
                        </div>
                        <div class="neofetch-info-line">
                            <div class="neofetch-info-label">Shell:</div>
                            <div class="neofetch-info-value">musheer360-shell 1.0.0</div>
                        </div>
                        <div class="neofetch-info-line">
                            <div class="neofetch-info-label">Theme:</div>
                            <div class="neofetch-info-value">${currentTheme}</div>
                        </div>
                    </div>
                </div>`;

                return neofetchHTML;
            }

            function detectBrowser() {
                const ua = navigator.userAgent;
                let browserName = "Unknown";
                let browserVersion = "";
                let osName = "Unknown";

                // Browser detection
                if (ua.includes("Firefox")) {
                    browserName = "Firefox";
                    const match = ua.match(/Firefox\/([\d.]+)/);
                    browserVersion = match ? match[1] : "";
                } else if (ua.includes("Chrome") && !ua.includes("Edg")) {
                    browserName = "Chrome";
                    const match = ua.match(/Chrome\/([\d.]+)/);
                    browserVersion = match ? match[1] : "";
                } else if (ua.includes("Safari") && !ua.includes("Chrome")) {
                    browserName = "Safari";
                    const match = ua.match(/Version\/([\d.]+)/);
                    browserVersion = match ? match[1] : "";
                } else if (ua.includes("Edg")) {
                    browserName = "Edge";
                    const match = ua.match(/Edg\/([\d.]+)/);
                    browserVersion = match ? match[1] : "";
                } else if (ua.includes("OPR") || ua.includes("Opera")) {
                    browserName = "Opera";
                    const match = ua.match(/(?:OPR|Opera)\/([\d.]+)/);
                    browserVersion = match ? match[1] : "";
                }

                // OS detection
                if (ua.includes("Windows")) {
                    osName = "Windows";
                } else if (ua.includes("Mac OS")) {
                    osName = "macOS";
                } else if (ua.includes("Linux")) {
                    osName = "Linux";
                } else if (ua.includes("Android")) {
                    osName = "Android";
                } else if (
                    ua.includes("iOS") ||
                    ua.includes("iPhone") ||
                    ua.includes("iPad")
                ) {
                    osName = "iOS";
                }

                return { browserName, browserVersion, osName };
            }

            function getBrowserLogo(browserName) {
                // Simple ASCII logos for different browsers
                const logos = {
                    Chrome: `
   .--.
  /    \\
 |      |
 |      |
  \\    /
   '--'
  Chrome`,
                    Firefox: `
    ,---.
   /     \\
  |       |
  |       |
   \\     /
    '---'
  Firefox`,
                    Edge: `
    ,---.
   /     \\
  |   E   |
  |       |
   \\     /
    '---'
    Edge`,
                    Safari: `
    ,---.
   /  C  \\
  |       |
  |       |
   \\     /
    '---'
   Safari`,
                    Opera: `
    ,---.
   /  O  \\
  |       |
  |       |
   \\     /
    '---'
    Opera`,
                    Unknown: `
    ,---.
   /  ?  \\
  |       |
  |       |
   \\     /
    '---'
  Browser`,
                };

                return logos[browserName] || logos["Unknown"];
            }

            function getUptime(startTime) {
                const now = new Date().getTime();
                const diff = now - startTime;

                const hours = Math.floor(diff / 3600000);
                const minutes = Math.floor((diff % 3600000) / 60000);

                return `${hours} hours, ${minutes} minutes`;
            }

            // HTOP implementation
            function startHtop() {
                currentCommand = "htop";
                commandInterrupted = false;

                const htopHTML = `<div class="htop-container">
                    <div class="htop-header">
                        <div>Tasks: 24 total, 3 running</div>
                        <div>Load average: 0.52 0.58 0.59</div>
                        <div>Uptime: ${getUptime(new Date().getTime() - Math.floor(Math.random() * 3600000))}</div>
                    </div>
                    <div class="htop-cpu-bars">
                        <div class="htop-cpu-bar"><div class="htop-cpu-usage" style="width: 15%"></div></div>
                        <div class="htop-cpu-bar"><div class="htop-cpu-usage" style="width: 8%"></div></div>
                        <div class="htop-cpu-bar"><div class="htop-cpu-usage" style="width: 25%"></div></div>
                        <div class="htop-cpu-bar"><div class="htop-cpu-usage" style="width: 5%"></div></div>
                    </div>
                    <div class="htop-memory-bar"><div class="htop-memory-usage" style="width: 42%"></div></div>
                    <table class="htop-process-table">
                        <thead>
                            <tr>
                                <th>PID</th>
                                <th>USER</th>
                                <th>PRI</th>
                                <th>NI</th>
                                <th>VIRT</th>
                                <th>RES</th>
                                <th>CPU%</th>
                                <th>MEM%</th>
                                <th>TIME+</th>
                                <th>Command</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>root</td>
                                <td>20</td>
                                <td>0</td>
                                <td>4296</td>
                                <td>3184</td>
                                <td>0.0</td>
                                <td>0.1</td>
                                <td>0:01.25</td>
                                <td>/sbin/init</td>
                            </tr>
                            <tr>
                                <td>42</td>
                                <td>musheer</td>
                                <td>20</td>
                                <td>0</td>
                                <td>12.4M</td>
                                <td>8.2M</td>
                                <td>2.5</td>
                                <td>0.4</td>
                                <td>1:42.30</td>
                                <td>terminal</td>
                            </tr>
                            <tr>
                                <td>420</td>
                                <td>musheer</td>
                                <td>20</td>
                                <td>0</td>
                                <td>145.2M</td>
                                <td>84.6M</td>
                                <td>15.0</td>
                                <td>4.2</td>
                                <td>5:30.42</td>
                                <td>browser</td>
                            </tr>
                            <tr>
                                <td>1337</td>
                                <td>musheer</td>
                                <td>20</td>
                                <td>0</td>
                                <td>22.8M</td>
                                <td>12.4M</td>
                                <td>0.8</td>
                                <td>0.6</td>
                                <td>0:45.12</td>
                                <td>htop</td>
                            </tr>
                            <tr>
                                <td>2048</td>
                                <td>root</td>
                                <td>10</td>
                                <td>-5</td>
                                <td>8.4M</td>
                                <td>4.2M</td>
                                <td>0.2</td>
                                <td>0.2</td>
                                <td>2:10.85</td>
                                <td>systemd</td>
                            </tr>
                            <tr>
                                <td>3141</td>
                                <td>musheer</td>
                                <td>20</td>
                                <td>0</td>
                                <td>256.4M</td>
                                <td>128.8M</td>
                                <td>8.4</td>
                                <td>6.4</td>
                                <td>3:14.15</td>
                                <td>code</td>
                            </tr>
                            <tr>
                                <td>4096</td>
                                <td>musheer</td>
                                <td>20</td>
                                <td>0</td>
                                <td>64.0M</td>
                                <td>32.0M</td>
                                <td>1.2</td>
                                <td>1.6</td>
                                <td>0:30.00</td>
                                <td>ssh</td>
                            </tr>
                        </tbody>
                    </table>
                    <div style="margin-top: 10px; color: #aaa; font-size: 12px;">Press Ctrl+C to exit</div>
                </div>`;

                // Animate CPU and memory usage
                setTimeout(() => {
                    if (currentCommand !== "htop" || commandInterrupted) return;

                    const cpuBars =
                        document.querySelectorAll(".htop-cpu-usage");
                    const memoryBar =
                        document.querySelector(".htop-memory-usage");

                    function updateBars() {
                        if (currentCommand !== "htop" || commandInterrupted)
                            return;

                        cpuBars.forEach((bar) => {
                            const currentWidth = parseFloat(bar.style.width);
                            const newWidth =
                                currentWidth + (Math.random() * 10 - 5);
                            bar.style.width = `${Math.max(1, Math.min(100, newWidth))}%`;
                        });

                        const currentMemWidth = parseFloat(
                            memoryBar.style.width,
                        );
                        const newMemWidth =
                            currentMemWidth + (Math.random() * 4 - 2);
                        memoryBar.style.width = `${Math.max(30, Math.min(60, newMemWidth))}%`;

                        setTimeout(updateBars, 1000);
                    }

                    updateBars();
                }, 100);

                return htopHTML;
            }

            // Weather implementation
            function showWeather(location = "New York") {
                // Simulated weather data
                const weatherData = {
                    "New York": {
                        temp: "72°F",
                        condition: "Partly Cloudy",
                        humidity: "65%",
                        wind: "8 mph",
                        icon: `
    \\   /
     .--.
  .-(    ).
 (___.__)__)
        `,
                    },
                    London: {
                        temp: "18°C",
                        condition: "Rainy",
                        humidity: "80%",
                        wind: "12 km/h",
                        icon: `
     .--.
    (    ).
   (___(__)
    ' ' ' '
   ' ' ' '
        `,
                    },
                    Tokyo: {
                        temp: "26°C",
                        condition: "Sunny",
                        humidity: "45%",
                        wind: "10 km/h",
                        icon: `
    \\   /
     .-.
  ― (   ) ―
     '-'
    /   \\
        `,
                    },
                    Sydney: {
                        temp: "22°C",
                        condition: "Clear",
                        humidity: "55%",
                        wind: "15 km/h",
                        icon: `
      *
       *
    *  *  *
     *  *
        `,
                    },
                    Default: {
                        temp: "20°C",
                        condition: "Unknown",
                        humidity: "60%",
                        wind: "10 km/h",
                        icon: `
     .-.
    (   ).
   (___(__)
        `,
                    },
                };

                const data = weatherData[location] || weatherData["Default"];

                const weatherHTML = `<div class="weather-container">
                    <div class="weather-location">${location}</div>
                    <div class="weather-icon">${data.icon}</div>
                    <div class="weather-temp">${data.temp}</div>
                    <div class="weather-desc">${data.condition}</div>
                    <div class="weather-details">
                        <div class="weather-detail">
                            <div>Humidity</div>
                            <div>${data.humidity}</div>
                        </div>
                        <div class="weather-detail">
                            <div>Wind</div>
                            <div>${data.wind}</div>
                        </div>
                    </div>
                </div>`;

                return weatherHTML;
            }

            // Figlet implementation
            function createFiglet(text) {
                // Simple ASCII art generator
                const figletChars = {
                    A: ["  _  ", " / \\ ", "/_._\\", "|   |", "|   |"],
                    B: ["___ ", "|__]", "|__]", "|__]", "    "],
                    C: [" ___", "|   ", "|   ", "|___", "    "],
                    D: ["___ ", "|  \\", "|   |", "|__/", "    "],
                    E: ["____", "|___", "|___", "|___", "    "],
                    F: ["____", "|___", "|   ", "|   ", "    "],
                    G: [" ___", "| __", "| _|", "|___", "    "],
                    H: ["|  |", "|__|", "|  |", "|  |", "    "],
                    I: ["___", " | ", " | ", "_|_", "   "],
                    J: ["    |", "    |", "|   |", " \\_/ ", "     "],
                    K: ["|  /", "|-< ", "|  \\", "|   \\", "     "],
                    L: ["|   ", "|   ", "|   ", "|___", "    "],
                    M: ["|\\  /|", "| \\/ |", "|    |", "|    |", "      "],
                    N: ["|\\  |", "| \\ |", "|  \\|", "|   |", "     "],
                    O: [" ___ ", "|   |", "|   |", "|___|", "     "],
                    P: ["___ ", "|__]", "|   ", "|   ", "    "],
                    Q: [" ___ ", "|   |", "|   |", "|__\\|", "     "],
                    R: ["___ ", "|__]", "|  \\", "|   \\", "     "],
                    S: [" ___", "|___", " ___|", "|___", "    "],
                    T: ["___", " | ", " | ", " | ", "   "],
                    U: ["|   |", "|   |", "|   |", "|___|", "     "],
                    V: ["\\    /", " \\  / ", "  \\/  ", "      ", "      "],
                    W: ["|    |", "|    |", "| /\\ |", "|/  \\|", "      "],
                    X: ["\\  /", " \\/ ", " /\\ ", "/  \\", "    "],
                    Y: ["\\   /", " \\ / ", "  |  ", "  |  ", "     "],
                    Z: ["____", "  / ", " /  ", "/___", "    "],
                    0: [" ___ ", "|   |", "|   |", "|___|", "     "],
                    1: [" _ ", "/ |", "  |", "  |", "   "],
                    2: [" ___ ", "    |", " ___|", "|____", "     "],
                    3: [" ___ ", "    |", " ___|", " ___|", "     "],
                    4: ["|   |", "|___|", "    |", "    |", "     "],
                    5: [" ____", "|    ", "|___ ", " ___|", "     "],
                    6: [" ___ ", "|    ", "|___ ", "|___|", "     "],
                    7: ["____", "   /", "  / ", " /  ", "    "],
                    8: [" ___ ", "|___|", "|___|", "|___|", "     "],
                    9: [" ___ ", "|___|", " ___|", " ___|", "     "],
                    " ": ["  ", "  ", "  ", "  ", "  "],
                    "!": ["|", "|", "|", ".", " "],
                    ".": [" ", " ", " ", ".", " "],
                    ",": [" ", " ", " ", ",", "/"],
                    "?": [" __ ", "   /", "  / ", " .  ", "    "],
                    ":": [" ", ".", " ", ".", " "],
                    ";": [" ", ".", " ", ",", "/"],
                    "-": ["    ", "    ", "----", "    ", "    "],
                    _: ["     ", "     ", "     ", "_____", "     "],
                    "=": ["     ", "=====", "=====", "     ", "     "],
                    "+": ["     ", "  |  ", "--+--", "  |  ", "     "],
                    "*": ["     ", "\\   /", " \\ / ", "/   \\", "     "],
                    "/": ["    /", "   / ", "  /  ", " /   ", "/    "],
                    "\\": ["\\    ", " \\   ", "  \\  ", "   \\ ", "    \\"],
                    "(": ["  /", " / ", "|  ", " \\ ", "  \\"],
                    ")": ["\\  ", " \\ ", "  |", " / ", "/  "],
                    "[": ["|-", "| ", "| ", "| ", "|-"],
                    "]": ["-|", " |", " |", " |", "-|"],
                    "{": ["  /", " | ", "<  ", " | ", "  \\"],
                    "}": ["\\  ", " | ", "  >", " | ", "/  "],
                    "|": ["|", "|", "|", "|", "|"],
                    "^": [" /\\ ", "/  \\", "    ", "    ", "    "],
                    "&": [" _   ", "(_)  ", "/ \\_/", "\\_/\\ ", "     "],
                };

                // Convert text to uppercase since our ASCII art is for uppercase
                text = text.toUpperCase();

                // Initialize result array with empty strings for each line
                const result = ["", "", "", "", ""];

                // Build each line of the ASCII art
                for (let i = 0; i < text.length; i++) {
                    const char = text[i];
                    const charArt = figletChars[char] || figletChars[" "];

                    for (let line = 0; line < 5; line++) {
                        result[line] += charArt[line];
                    }
                }

                // Join the lines with newlines
                return `<div class="figlet-output">${result.join("\n")}</div>`;
            }

            // Event listeners
            userInput.addEventListener("input", updateFakeInput);

            userInput.addEventListener("keydown", function (event) {
                // Command execution
                if (event.key === "Enter") {
                    const command = this.value.trim().toLowerCase();
                    handleCommand(command);
                }

                // Command history navigation
                if (event.key === "ArrowUp") {
                    if (commandHistoryArray.length > 0) {
                        commandHistoryIndex = Math.min(
                            commandHistoryIndex + 1,
                            commandHistoryArray.length - 1,
                        );
                        userInput.value =
                            commandHistoryArray[commandHistoryIndex];
                        updateFakeInput();
                        event.preventDefault();
                    }
                } else if (event.key === "ArrowDown") {
                    if (commandHistoryIndex > 0) {
                        commandHistoryIndex--;
                        userInput.value =
                            commandHistoryArray[commandHistoryIndex];
                    } else if (commandHistoryIndex === 0) {
                        commandHistoryIndex = -1;
                        userInput.value = "";
                    }
                    updateFakeInput();
                    event.preventDefault();
                }

                // Tab completion
                if (event.key === "Tab") {
                    event.preventDefault();
                    const input = userInput.value.trim().toLowerCase();

                    if (input) {
                        const possibleCommands = Object.keys(commands).filter(
                            (cmd) => cmd.startsWith(input),
                        );

                        if (possibleCommands.length === 1) {
                            userInput.value = possibleCommands[0];
                            updateFakeInput();
                        } else if (possibleCommands.length > 1) {
                            addOutput(
                                `<div class="output"><span class="highlight">${prompt} ${input}</span></div>`,
                            );
                            addOutput(possibleCommands.join("  "));
                        }
                    }
                }

                // Konami code detection
                if (
                    [
                        "ArrowUp",
                        "ArrowDown",
                        "ArrowLeft",
                        "ArrowRight",
                        "a",
                        "b",
                    ].includes(event.key)
                ) {
                    konamiSequence.push(event.key);
                    if (konamiSequence.length > konamiCode.length) {
                        konamiSequence.shift();
                    }
                    checkKonamiCode();
                } else {
                    konamiSequence = [];
                }
            });

            document.addEventListener("keydown", function (event) {
                if (event.key === "Enter") {
                    scrollToBottom();
                }

                // Ctrl+C to interrupt commands
                if (event.ctrlKey && event.key === "c") {
                    if (currentCommand) {
                        commandInterrupted = true;
                        addOutput("^C");
                        currentCommand = null;
                        scrollToBottom();
                    }
                    event.preventDefault();
                }

                // Ctrl+L to clear screen
                if (event.ctrlKey && event.key === "l") {
                    commands.clear();
                    event.preventDefault();
                }

                // Ctrl+R to show command history
                if (event.ctrlKey && event.key === "r") {
                    event.preventDefault();
                    showCommandHistory();
                }

                // Hide command history with Escape
                if (event.key === "Escape") {
                    hideCommandHistory();
                }
            });

            document.addEventListener("mousedown", (e) => {
                if (
                    e.target !== userInput &&
                    !e.target.closest(".command-history")
                ) {
                    hideCommandHistory();
                    e.preventDefault();
                    userInput.focus();
                }
            });

            userInput.addEventListener("blur", () => {
                setTimeout(() => userInput.focus(), 0);
            });

            userInput.focus();
            updateFakeInput();

            window.addEventListener("resize", () => {
                updateFakeInput();
                if (matrixActive) {
                    matrixCanvas.width = window.innerWidth;
                    matrixCanvas.height = window.innerHeight;
                }
            });

            window.addEventListener("load", scrollToBottom);

            const observer = new MutationObserver(scrollToBottom);
            observer.observe(terminal, { childList: true, subtree: true });

            function updateLayout() {
                const viewportHeight = window.visualViewport.height;
                terminal.style.height = `${viewportHeight}px`;
                scrollToBottom();
            }

            window.visualViewport.addEventListener("resize", updateLayout);
            window.addEventListener("orientationchange", updateLayout);

            updateLayout();
        </script>
    </body>
</html>

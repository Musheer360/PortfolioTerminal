<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Musheer Alam</title>
        <meta
            name="description"
            content="Explore Musheer Alam's terminal themed portfolio. Discover expertise in cybersecurity, cloud, and AI. Navigate projects and connect with a tech innovator."
        />
        <meta name="author" content="Musheer Alam" />
        <link rel="canonical" href="https://www.musheer360.com" />
        <meta property="og:title" content="Musheer Alam" />
        <meta
            property="og:description"
            content="Explore Musheer Alam's terminal themed portfolio. Discover expertise in cybersecurity, cloud, and AI. Navigate projects and connect with a tech innovator."
        />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://www.musheer360.com" />
        <meta
            property="og:image"
            content="https://www.musheer360.com/banner.png"
        />
        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:title" content="Musheer Alam" />
        <meta
            name="twitter:description"
            content="Explore Musheer Alam's terminal themed portfolio. Discover expertise in cybersecurity, cloud, and AI. Navigate projects and connect with a tech innovator."
        />
        <meta
            name="twitter:image"
            content="https://www.musheer360.com/banner.png"
        />
        <link
            rel="icon"
            href="https://www.musheer360.com/favicon.ico"
            type="image/x-icon"
        />
        <script type="application/ld+json">
            {
                "@context": "http://schema.org",
                "@type": "WebPage",
                "name": "Musheer Alam",
                "description": "Portfolio showcasing the skills and projects of Musheer Alam, a Computer Science student passionate about technology, AI, cybersecurity, Linux, and cloud computing.",
                "url": "https://www.musheer360.com",
                "mainEntity": {
                    "@type": "Person",
                    "name": "Musheer Alam",
                    "url": "https://www.musheer360.com",
                    "sameAs": [
                        "https://linkedin.com/in/musheer360",
                        "https://github.com/musheer360",
                        "https://x.com/musheer360",
                        "https://musheer360.tech",
                        "https://musheer360.me"
                    ],
                    "jobTitle": "Aspiring Cybersecurity Expert",
                    "skills": [
                        "Cybersecurity",
                        "Network Security",
                        "Web App Security",
                        "Programming",
                        "Linux Administration",
                        "Cloud Computing"
                    ]
                },
                "mainContentOfPage": {
                    "@type": "WebPageElement",
                    "cssSelector": "#terminal"
                },
                "relatedLink": [
                    "https://linktr.ee/BlankSlateWeb",
                    "https://github.com/musheer360/QuoteSlate",
                    "https://github.com/musheer360/NovaChat",
                    "https://web.musheer360.com"
                ],
                "hasPart": [
                    {
                        "@type": "SoftwareApplication",
                        "name": "BlankSlate",
                        "url": "https://linktr.ee/BlankSlateWeb",
                        "description": "Minimalistic new tab extension available for Chrome, Edge, and Firefox.",
                        "applicationCategory": "Browser Extension",
                        "operatingSystem": "Chrome, Firefox, Edge",
                        "offers": {
                            "@type": "Offer",
                            "price": "0",
                            "priceCurrency": "USD"
                        }
                    },
                    {
                        "@type": "SoftwareSourceCode",
                        "name": "QuoteSlate",
                        "codeRepository": "https://github.com/musheer360/QuoteSlate",
                        "description": "API for inspirational quotes, built with Node.js and Postgres, currently hosts over 2,600 quotes.",
                        "programmingLanguage": "Node.js"
                    },
                    {
                        "@type": "MobileApplication",
                        "name": "NovaChat",
                        "url": "https://github.com/musheer360/NovaChat",
                        "description": "AI-powered Android chat app using Google's Gemini API for NLP with a simple and intuitive interface.",
                        "operatingSystem": "Android",
                        "applicationCategory": "ChatApplication"
                    },
                    {
                        "@type": "TechArticle",
                        "name": "Sony Xperia M Homelab",
                        "url": "https://web.musheer360.com",
                        "description": "Revived an 11-year-old Sony Xperia M to run LineageOS with Termux as a mini server for tech experiments.",
                        "about": {
                            "@type": "Thing",
                            "name": "Homelab"
                        }
                    }
                ]
            }
        </script>
        <style>
            * {
                cursor: default !important;
            }
            body,
            html {
                margin: 0;
                padding: 0;
                height: 100%;
                background-color: #000;
                color: #0f0;
                font-family: "Courier New", monospace;
                overflow: hidden;
                user-select: none;
            }
            #terminal {
                height: 100vh;
                padding: 20px;
                box-sizing: border-box;
                overflow-y: scroll;
                scroll-behavior: auto;
                scrollbar-width: none;
                -ms-overflow-style: none;
                position: relative;
            }
            #terminal::-webkit-scrollbar {
                display: none;
            }
            #input-line {
                display: flex;
                align-items: center;
            }
            #prompt {
                color: #0f0;
                margin-right: 10px;
            }
            #input-container {
                position: relative;
                flex-grow: 1;
            }
            #user-input {
                background: 0 0;
                border: none;
                color: #0f0;
                font-family: "Courier New", monospace;
                font-size: 16px;
                width: 100%;
                outline: 0;
                padding: 0;
                margin: 0;
                caret-color: transparent;
            }
            #fake-input {
                position: absolute;
                top: 0;
                left: 0;
                color: transparent;
                pointer-events: none;
                white-space: pre;
            }
            .cursor-block {
                display: inline-block;
                width: 0.6em;
                height: 1.2em;
                background-color: #0f0;
                vertical-align: middle;
                margin-left: 1px;
                animation: blink 1s step-end infinite;
            }
            .output {
                margin-bottom: 10px;
                white-space: pre-wrap;
                word-wrap: break-word;
            }
            .error {
                color: red;
            }
            .success {
                color: #0f0;
            }
            .highlight {
                color: #ff0;
            }
            .error-highlight {
                color: red;
            }
            a {
                color: #0ff;
                text-decoration: none;
            }
            a:hover {
                text-decoration: underline;
            }
            .visually-hidden {
                position: absolute;
                width: 1px;
                height: 1px;
                padding: 0;
                margin: -1px;
                overflow: hidden;
                clip: rect(0, 0, 0, 0);
                white-space: nowrap;
                border: 0;
            }
            @keyframes blink {
                0%,
                100% {
                    opacity: 1;
                }
                50% {
                    opacity: 0;
                }
            }
            .fullscreen {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                z-index: 1000;
                background-color: #000;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                color: #0f0;
                font-family: "Courier New", monospace;
            }
            .progress-container {
                width: 80%;
                max-width: 500px;
                height: 20px;
                background-color: #111;
                border: 1px solid #0f0;
                margin: 10px 0;
                position: relative;
            }
            .progress-bar {
                height: 100%;
                background-color: #0f0;
                width: 0%;
                transition: width 0.3s ease;
            }
            .ascii-art {
                white-space: pre;
                font-family: monospace;
                line-height: 1.2;
                text-align: center;
                margin: 20px 0;
            }
            .hidden {
                display: none;
            }
            .command-history {
                position: absolute;
                right: 20px;
                top: 50px;
                background-color: rgba(0, 0, 0, 0.8);
                border: 1px solid #0f0;
                padding: 10px;
                max-width: 200px;
                max-height: 300px;
                overflow-y: auto;
                z-index: 100;
                display: none;
            }
            .command-history-item {
                color: #0f0;
                padding: 2px 5px;
                cursor: pointer !important;
            }
            .command-history-item:hover {
                background-color: #0f01;
            }
            .htop-container {
                font-family: monospace;
                width: 100%;
                height: 100%;
                position: fixed;
                top: 0;
                left: 0;
                background-color: #000;
                z-index: 1000;
                padding: 20px;
                box-sizing: border-box;
                overflow-y: auto;
            }
            .htop-header {
                display: flex;
                justify-content: space-between;
                margin-bottom: 10px;
                padding: 5px;
                background-color: #111;
                border: 1px solid #333;
            }
            .htop-cpu-bars {
                display: flex;
                gap: 2px;
                margin-bottom: 10px;
            }
            .htop-cpu-bar {
                height: 15px;
                flex-grow: 1;
                background-color: #111;
                border: 1px solid #333;
                position: relative;
            }
            .htop-cpu-usage {
                height: 100%;
                background-color: #0f0;
                width: 0%;
                transition: width 0.5s ease;
            }
            .htop-memory-bar {
                height: 15px;
                width: 100%;
                background-color: #111;
                border: 1px solid #333;
                margin-bottom: 10px;
                position: relative;
            }
            .htop-memory-usage {
                height: 100%;
                background-color: #0a0;
                width: 0%;
                transition: width 0.5s ease;
            }
            .htop-process-table {
                width: 100%;
                border-collapse: collapse;
                font-size: 14px;
            }
            .htop-process-table th {
                text-align: left;
                padding: 5px;
                background-color: #111;
                border: 1px solid #333;
            }
            .htop-process-table td {
                padding: 3px 5px;
                border: 1px solid #222;
            }
            .htop-process-table tr:nth-child(even) {
                background-color: #0a0a0a;
            }
            .htop-process-table tr:hover {
                background-color: #111;
            }
            .neofetch-container {
                display: flex;
                font-family: monospace;
                padding: 10px;
                max-width: 800px;
            }
            .neofetch-info {
                flex-grow: 1;
            }
            .neofetch-info-line {
                margin-bottom: 5px;
                display: flex;
            }
            .neofetch-info-label {
                color: #0f0;
                margin-right: 10px;
                min-width: 100px;
            }
            .neofetch-info-value {
                color: #fff;
            }
            .figlet-output {
                font-family: monospace;
                white-space: pre;
                line-height: 1.2;
                text-align: center;
                margin: 20px 0;
                color: #0f0;
            }
            @media (max-width: 600px) {
                #user-input,
                body {
                    font-size: 14px;
                }
                #terminal {
                    padding: 10px;
                }
                #prompt {
                    margin-right: 7.5px;
                }
                .command-history {
                    max-width: 150px;
                    right: 10px;
                    top: 40px;
                }
                .neofetch-container {
                    flex-direction: column;
                }
                .htop-process-table {
                    font-size: 12px;
                }
            }
        </style>
    </head>
    <body>
        <div id="terminal">
            <div id="initial-message" class="output success">Welcome to musheer360's web terminal.</div>
            <div id="help-message" class="output">Type 'help' for available commands.</div>
            <div id="command-output"></div>
            <div id="input-line">
                <span id="prompt">visitor@musheer360:~$</span>
                <div id="input-container">
                    <label for="user-input" class="visually-hidden"
                        >Enter command</label
                    >
                    <input
                        type="text"
                        id="user-input"
                        autocomplete="off"
                        autocapitalize="off"
                        autofocus
                        aria-label="Enter command"
                    />
                    <span id="fake-input"></span>
                </div>
            </div>
            <div id="command-history" class="command-history"></div>
        </div>
        <script>
            const commandOutput = document.getElementById("command-output");
            const userInput = document.getElementById("user-input");
            const fakeInput = document.getElementById("fake-input");
            const initialMessage = document.getElementById("initial-message");
            const helpMessage = document.getElementById("help-message");
            const terminal = document.getElementById("terminal");
            const commandHistory = document.getElementById("command-history");

            let prompt = "visitor@musheer360:~$";
            let commandHistoryArray = [];
            let commandHistoryIndex = -1;
            let currentTheme = "green"; // Default theme
            let currentCommand = null;
            let commandInterrupted = false;
            let inRootMode = false;
            let isMobileDevice = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);

            // Theme configurations
            const themes = {
                green: {
                    bg: "#000",
                    text: "#0f0",
                    highlight: "#ff0",
                    link: "#0ff",
                    error: "red",
                },
                blue: {
                    bg: "#001",
                    text: "#0af",
                    highlight: "#fff",
                    link: "#ff0",
                    error: "#f55",
                },
                amber: {
                    bg: "#100",
                    text: "#fa0",
                    highlight: "#ff0",
                    link: "#fff",
                    error: "#f55",
                },
            };

            const commands = {
                help: () => `Available commands:
    about - Learn more about me
    skills - Discover what I can do
    projects - See what I've built
    contact - Get in touch with me
    clear - Clear the terminal screen (Ctrl+L)
    neofetch - Display system information
    htop - Interactive process viewer
    figlet - Create ASCII text banners
    hack - Simulate a hacking sequence
    sudo - Try to gain root access
    arch - Display Arch Linux pride
    42 - The answer to everything
    ls -la - List all files
    cowsay - Make a cow say something
    history - Show command history
    theme - Change terminal theme`,
                about: () => `I'm Musheer Alam, a Computer Science student
with a focus on Cybersecurity and Cloud Computing.

Currently working as a Research Intern at CloudThat in Bangalore,
where I co-architected "Kubeguard," a Helm-based Kubernetes security suite.

I hold several certifications including:
- AWS Certified Cloud Practitioner
- CompTIA Security+ (SY0-701)
- ISC2 Certified in Cybersecurity (CC)
- Google Cybersecurity Professional Certificate

When I'm not securing systems or coding,
I'm exploring new technologies and building
projects that solve real-world problems.

Oh, and did I mention? I use Arch BTW.`,
                skills: () => `Skills:

    • Cybersecurity & Risk Management:
      - Vulnerability Management, Threat Intelligence
      - Risk Assessment, CVE Analysis
      - Incident Response, Security Monitoring

    • Security Tools & Technologies:
      - Nessus, OpenVAS, Burp Suite, Metasploit
      - Wireshark, SIEM (Splunk), Nmap, OSINT Framework
      - Linux (Arch, Fedora, Debian-based: Kali, Ubuntu)

    • Programming & Scripting:
      - Python (for security automation), C++, Java
      - JavaScript, Node.js, Bash, PowerShell
      - SQL, YAML, JSON, AI-driven code orchestration

    • Cloud & DevOps:
      - AWS, Google Cloud Platform, Microsoft Azure
      - Vercel, Cloudflare, Docker, Kubernetes
      - Linux Administration, IaC, Git, CI/CD

    • Networking & System Security:
      - TCP/IP, Firewalls, IDS/IPS
      - Endpoint Security, Linux Security Hardening`,
                projects: () => `Some of my works:

    • <a href="https://linktr.ee/BlankSlateWeb" target="_blank">BlankSlate</a>:
      - Minimalistic new tab extension.
      - Provides a minimalist new tab page.
      - Supports Chrome, Edge, and Firefox.

    • <a href="https://github.com/musheer360/QuoteSlate" target="_blank">QuoteSlate (RESTful Quotes API)</a>:
      - Built with Node.js/Express on Vercel.
      - Defended against Layer 7 DDoS attack (300K+ req/day).
      - Enhanced with rate limiting, CORS, input validation.

    • <a href="https://github.com/musheer360/NovaChat" target="_blank">NovaChat</a>:
      - AI-powered Android chat app.
      - Uses Google's Gemini API for NLP.
      - Simple and intuitive interface.

    • <a href="https://web.musheer360.com" target="_blank">Privacy-Preserving Edge AI</a>:
      - Optimized TinyLLaMA 1.1B for mobile devices.
      - Leveraged LLaMA.cpp inference for ARMv8-A.
      - Implemented GGUF quantization (Q5_K_M).

    • <a href="https://web.musheer360.com" target="_blank">Secure Edge Server</a>:
      - Transformed obsolete smartphone into secure server.
      - Optimized LineageOS, Termux, and Magisk.
      - Hardened with SSH keys, firewall rules, Cloudflare Tunnel.`,
                contact: () => `Reach out:

    • Email: <a href="mailto:me@musheer360.com">me@musheer360.com</a>
    • GitHub: <a href="https://github.com/musheer360" target="_blank" rel="noopener">github.com/musheer360</a>
    • LinkedIn: <a href="https://linkedin.com/in/musheer360" target="_blank" rel="noopener">linkedin.com/in/musheer360</a>
    • X: <a href="https://x.com/musheer360" target="_blank" rel="noopener">x.com/musheer360</a>
    • YouTube: <a href="https://www.youtube.com/@TechAceYoutube" target="_blank" rel="noopener">youtube.com/@TechAceYoutube</a>`,
                clear: () => {
                    commandOutput.innerHTML = "";
                    initialMessage.style.display = "none";
                    helpMessage.style.display = "none";
                    return "";
                },
                neofetch: () => {
                    return generateNeofetch();
                },
                htop: () => {
                    if (isMobileDevice) {
                        return "The htop command is disabled on mobile devices as it requires Ctrl+C to exit.";
                    }
                    currentCommand = "htop";
                    commandInterrupted = false;
                    return startHtop();
                },
                figlet: () => {
                    return `Usage: figlet [text]
Example: figlet Hello World`;
                },
                hack: () => {
                    currentCommand = "hack";
                    commandInterrupted = false;
                    const hackingSequence = createHackingSequence();
                    return hackingSequence;
                },
                sudo: () => {
                    return `Usage: sudo su
Example: sudo su - Execute commands as root`;
                },
                arch: () => {
                    return `
                   -\`
                  .o+\`
                 \`ooo/
                \`+oooo:
               \`+oooooo:
               -+oooooo+:
             \`/:-:++oooo+:
            \`/++++/+++++++:
           \`/++++++++++++++:
          \`/+++ooooooooooooo/\`
         ./ooosssso++osssssso+\`
        .oossssso-\`\`\`\`/ossssss+\`
       -osssssso.      :ssssssso.
      :osssssss/        osssso+++.
     /ossssssss/        +ssssooo/-
   \`/ossssso+/:-        -:/+osssso+-
  \`+sso+:-\`                 \`.-/+oso:
 \`++:.                           \`-/+/
 .\`                                 \`/

I use Arch BTW... but you already knew that.

Fun facts about Arch Linux users:
- We can't go 5 minutes without mentioning we use Arch
- We spend more time customizing our system than using it
- We've broken and fixed our system so many times we could do it blindfolded
- We judge other Linux users by their distro choice
- We secretly enjoy the pain of manual configuration`;
                },
                42: () => {
                    return `The Answer to the Ultimate Question of Life, the Universe, and Everything is 42.

But what was the question? Here are some possibilities:

- How many times will you need to reinstall Arch before getting it right?
- What's the ideal number of browser tabs for a developer?
- How many cups of coffee are required to debug that one weird error?
- What's the perfect room temperature for a heated programming debate?
- How many mechanical keyboards does one really need?
- What percentage of code is actually comments and whitespace?`;
                },
                "ls -la": () => {
                    return `total 42
drwxr-xr-x  2 musheer360 users  4096 May 17 2025 .
drwxr-xr-x 21 root      root   4096 May 17 2025 ..
-rw-------  1 musheer360 users   220 May 17 2025 .bash_history
-rw-r--r--  1 musheer360 users  3771 May 17 2025 .bashrc
drwx------  2 musheer360 users  4096 May 17 2025 .cache
-rw-r--r--  1 musheer360 users   807 May 17 2025 .profile
drwxr-xr-x  2 musheer360 users  4096 May 17 2025 .ssh
-rw-r--r--  1 musheer360 users     0 May 17 2025 .sudo_as_admin_successful
-rw-r--r--  1 musheer360 users  1337 May 17 2025 about.txt
-rw-r--r--  1 musheer360 users  2600 May 17 2025 quotes.db
drwxr-xr-x  4 musheer360 users  4096 May 17 2025 projects
-rwxr-xr-x  1 musheer360 users  9001 May 17 2025 hack_the_planet.sh
-rw-r--r--  1 musheer360 users   420 May 17 2025 .hidden_easter_egg
drwxr-xr-x  2 musheer360 users  4096 May 17 2025 .secrets`;
                },
                cowsay: () => {
                    return createCowsay(
                        "Moo! I'm a terminal cow. Type 'cowsay [your message]' to make me say something!",
                    );
                },
                history: () => {
                    if (commandHistoryArray.length === 0) {
                        return "No commands in history yet.";
                    }

                    return commandHistoryArray
                        .map(
                            (cmd, index) =>
                                `${(index + 1).toString().padStart(4, " ")}  ${cmd}`,
                        )
                        .join("\n");
                },
                theme: () => {
                    return `Available themes:
    green - Classic terminal green (default)
    blue - Cool blue theme
    amber - Retro amber theme

Usage: theme [name]`;
                },
            };

            // Special command handlers
            function handleSpecialCommands(command) {
                if (command === "sudo su") {
                    if (inRootMode) {
                        return "You are already in root mode.";
                    }
                    
                    // Execute sudo su
                    inRootMode = true;
                    const originalPrompt = prompt;
                    prompt = "root@musheer360:#";
                    
                    // Update the prompt display
                    document.getElementById("prompt").textContent = prompt;

                    setTimeout(() => {
                        inRootMode = false;
                        prompt = originalPrompt;
                        document.getElementById("prompt").textContent = prompt;
                        addOutput("Root access expired. Back to regular user.");
                        scrollToBottom();
                    }, 60000); // Root access for 1 minute

                    return "This incident will be reported...\nRoot access granted for 1 minute.";
                }
                
                if (command.startsWith("cowsay ")) {
                    const message = command.substring(7).trim();
                    if (message) {
                        return createCowsay(message);
                    } else {
                        return commands.cowsay();
                    }
                }

                if (command.startsWith("figlet ")) {
                    const text = command.substring(7).trim();
                    if (text) {
                        return createFiglet(text);
                    } else {
                        return commands.figlet();
                    }
                }

                if (command.startsWith("theme ")) {
                    const themeName = command.substring(6).trim();
                    if (themes[themeName]) {
                        setTheme(themeName);
                        return `Theme changed to ${themeName}.`;
                    } else {
                        return `Theme '${themeName}' not found. Type 'theme' to see available themes.`;
                    }
                }

                return null;
            }

            function executeCommand(cmd) {
                // Reset current command
                currentCommand = null;
                commandInterrupted = false;

                // Check for special command patterns first
                const specialOutput = handleSpecialCommands(cmd);
                if (specialOutput !== null) {
                    return { output: specialOutput, success: true };
                }

                // Then check for regular commands
                if (cmd in commands) {
                    return { output: commands[cmd](), success: true };
                } else {
                    return {
                        output: `Command not found: ${cmd}.
Type 'help' for the list of commands.`,
                        success: false,
                    };
                }
            }

            function updateFakeInput() {
                fakeInput.textContent = userInput.value;
            }

            function addNewPrompt() {
                commandOutput.innerHTML += `<div class="output"><span class="highlight">${prompt}</span></div>`;
                scrollToBottom();
            }

            function scrollToBottom() {
                terminal.scrollTop = terminal.scrollHeight;
            }

            function addOutput(text) {
                commandOutput.innerHTML += `<div class="output">${text}</div>`;
            }

            function handleCommand(command) {
                if (command === "") {
                    addNewPrompt();
                } else {
                    // Add to command history
                    if (commandHistoryArray.indexOf(command) === -1) {
                        commandHistoryArray.unshift(command);
                        if (commandHistoryArray.length > 50) {
                            commandHistoryArray.pop();
                        }
                    }
                    commandHistoryIndex = -1;

                    const { output, success } = executeCommand(command);
                    if (command !== "clear") {
                        const highlightClass = success
                            ? "highlight"
                            : "error-highlight";
                        commandOutput.innerHTML += `<div class="output"><span class="${highlightClass}">${prompt} ${command}</span></div>`;
                        commandOutput.innerHTML += `<div class="output">${output}</div>`;
                    }
                }
                userInput.value = "";
                fakeInput.textContent = "";
                // Reset cursor position after command execution
                updateCursorPosition();
                scrollToBottom();
            }

            // Hacking sequence
            function createHackingSequence() {
                const hackingDiv = document.createElement("div");
                hackingDiv.className = "fullscreen";
                document.body.appendChild(hackingDiv);

                const header = document.createElement("h2");
                header.textContent = "INITIALIZING HACK SEQUENCE";
                hackingDiv.appendChild(header);

                const progressContainer = document.createElement("div");
                progressContainer.className = "progress-container";
                hackingDiv.appendChild(progressContainer);

                const progressBar = document.createElement("div");
                progressBar.className = "progress-bar";
                progressContainer.appendChild(progressBar);

                const statusText = document.createElement("div");
                statusText.textContent = "Establishing connection...";
                hackingDiv.appendChild(statusText);

                const steps = [
                    "Establishing connection...",
                    "Bypassing firewall...",
                    "Accessing mainframe...",
                    "Decrypting security protocols...",
                    "Extracting data...",
                    "Covering tracks...",
                    "Hack complete! Access granted.",
                ];

                let currentStep = 0;
                let hackInterval;

                function cleanupHack() {
                    if (hackInterval) {
                        clearInterval(hackInterval);
                    }
                    document.body.removeChild(hackingDiv);
                    currentCommand = null;
                }

                hackInterval = setInterval(() => {
                    if (commandInterrupted) {
                        cleanupHack();
                        addOutput("^C");
                        addOutput("Hack sequence aborted.");
                        scrollToBottom();
                        return;
                    }

                    if (currentStep >= steps.length) {
                        clearInterval(hackInterval);

                        setTimeout(() => {
                            const funnyMessage = document.createElement("div");
                            funnyMessage.innerHTML = `<div class="ascii-art">
  _______________________________
 /                               \\
|   CONGRATULATIONS, HACKER!     |
|                                |
|   You've successfully hacked   |
|   absolutely nothing.          |
|                                |
|   But you looked cool doing it.|
 \\_______________________________/
            </div>`;
                            hackingDiv.appendChild(funnyMessage);

                            setTimeout(() => {
                                cleanupHack();
                            }, 5000);
                        }, 1000);

                        return;
                    }

                    statusText.textContent = steps[currentStep];
                    progressBar.style.width = `${((currentStep + 1) * 100) / steps.length}%`;
                    currentStep++;
                }, 800);

                return "Initiating hack sequence... Press Ctrl+C to abort.";
            }

            // Cowsay implementation
            function createCowsay(message) {
                const lines = [];
                const maxLength = Math.min(40, Math.max(message.length, 10));

                // Create the speech bubble
                lines.push(" " + "_".repeat(maxLength + 2));

                if (message.length <= maxLength) {
                    lines.push(`/ ${message.padEnd(maxLength, " ")} \\`);
                } else {
                    // Split long messages
                    for (let i = 0; i < message.length; i += maxLength) {
                        const chunk = message.substr(i, maxLength);
                        if (i === 0) {
                            lines.push(`/ ${chunk.padEnd(maxLength, " ")} \\`);
                        } else if (i + maxLength >= message.length) {
                            lines.push(`\\ ${chunk.padEnd(maxLength, " ")} /`);
                        } else {
                            lines.push(`| ${chunk.padEnd(maxLength, " ")} |`);
                        }
                    }
                }

                lines.push(" " + "-".repeat(maxLength + 2));

                // Add the cow
                lines.push("        \\   ^__^");
                lines.push("         \\  (oo)\\_______");
                lines.push("            (__)\\       )\\/\\");
                lines.push("                ||----w |");
                lines.push("                ||     ||");

                return lines.join("\n");
            }

            // Theme switching
            function setTheme(themeName) {
                if (!themes[themeName]) return;

                const theme = themes[themeName];
                document.body.style.backgroundColor = theme.bg;
                document.body.style.color = theme.text;

                // Update CSS variables for dynamic elements
                document.documentElement.style.setProperty(
                    "--text-color",
                    theme.text,
                );
                document.documentElement.style.setProperty(
                    "--bg-color",
                    theme.bg,
                );
                document.documentElement.style.setProperty(
                    "--highlight-color",
                    theme.highlight,
                );
                document.documentElement.style.setProperty(
                    "--link-color",
                    theme.link,
                );
                document.documentElement.style.setProperty(
                    "--error-color",
                    theme.error,
                );

                // Update specific elements
                const links = document.querySelectorAll("a");
                links.forEach((link) => {
                    link.style.color = theme.link;
                });

                // Save current theme
                currentTheme = themeName;
            }

            // Improved Figlet implementation
            function createFiglet(text) {
                // Enhanced ASCII art generator with more characters and better formatting
                const figletChars = {
                    A: [
                        "    _    ",
                        "   / \\   ",
                        "  / _ \\  ",
                        " / ___ \\ ",
                        "/_/   \\_\\",
                        "         "
                    ],
                    B: [
                        " ____  ",
                        "| __ ) ",
                        "|  _ \\ ",
                        "| |_) |",
                        "|____/ ",
                        "       "
                    ],
                    C: [
                        "  ____ ",
                        " / ___|",
                        "| |    ",
                        "| |___ ",
                        " \\____|",
                        "       "
                    ],
                    D: [
                        " ____  ",
                        "|  _ \\ ",
                        "| | | |",
                        "| |_| |",
                        "|____/ ",
                        "       "
                    ],
                    E: [
                        " _____ ",
                        "| ____|",
                        "|  _|  ",
                        "| |___ ",
                        "|_____|",
                        "       "
                    ],
                    F: [
                        " _____ ",
                        "| ____|",
                        "|  _|  ",
                        "| |    ",
                        "|_|    ",
                        "       "
                    ],
                    G: [
                        "  ____ ",
                        " / ___|",
                        "| |  _ ",
                        "| |_| |",
                        " \\____|",
                        "       "
                    ],
                    H: [
                        " _   _ ",
                        "| | | |",
                        "| |_| |",
                        "|  _  |",
                        "|_| |_|",
                        "       "
                    ],
                    I: [
                        " ___ ",
                        "|_ _|",
                        " | | ",
                        " | | ",
                        "|___|",
                        "     "
                    ],
                    J: [
                        "     _ ",
                        "    | |",
                        " _  | |",
                        "| |_| |",
                        " \\___/ ",
                        "       "
                    ],
                    K: [
                        " _  __",
                        "| |/ /",
                        "| ' / ",
                        "| . \\ ",
                        "|_|\\_\\",
                        "      "
                    ],
                    L: [
                        " _     ",
                        "| |    ",
                        "| |    ",
                        "| |___ ",
                        "|_____|",
                        "       "
                    ],
                    M: [
                        " __  __ ",
                        "|  \\/  |",
                        "| |\\/| |",
                        "| |  | |",
                        "|_|  |_|",
                        "        "
                    ],
                    N: [
                        " _   _ ",
                        "| \\ | |",
                        "|  \\| |",
                        "| |\\  |",
                        "|_| \\_|",
                        "       "
                    ],
                    O: [
                        "  ___  ",
                        " / _ \\ ",
                        "| | | |",
                        "| |_| |",
                        " \\___/ ",
                        "       "
                    ],
                    P: [
                        " ____  ",
                        "|  _ \\ ",
                        "| |_) |",
                        "|  __/ ",
                        "|_|    ",
                        "       "
                    ],
                    Q: [
                        "  ___  ",
                        " / _ \\ ",
                        "| | | |",
                        "| |_| |",
                        " \\__\\_\\",
                        "       "
                    ],
                    R: [
                        " ____  ",
                        "|  _ \\ ",
                        "| |_) |",
                        "|  _ < ",
                        "|_| \\_\\",
                        "       "
                    ],
                    S: [
                        " ____  ",
                        "/ ___| ",
                        "\\___ \\ ",
                        " ___) |",
                        "|____/ ",
                        "       "
                    ],
                    T: [
                        " _____ ",
                        "|_   _|",
                        "  | |  ",
                        "  | |  ",
                        "  |_|  ",
                        "       "
                    ],
                    U: [
                        " _   _ ",
                        "| | | |",
                        "| | | |",
                        "| |_| |",
                        " \\___/ ",
                        "       "
                    ],
                    V: [
                        "__     __",
                        "\\ \\   / /",
                        " \\ \\ / / ",
                        "  \\ V /  ",
                        "   \\_/   ",
                        "         "
                    ],
                    W: [
                        "__        __",
                        "\\ \\      / /",
                        " \\ \\ /\\ / / ",
                        "  \\ V  V /  ",
                        "   \\_/\\_/   ",
                        "            "
                    ],
                    X: [
                        "__  __",
                        "\\ \\/ /",
                        " \\  / ",
                        " /  \\ ",
                        "/_/\\_\\",
                        "      "
                    ],
                    Y: [
                        "__   __",
                        "\\ \\ / /",
                        " \\ V / ",
                        "  | |  ",
                        "  |_|  ",
                        "       "
                    ],
                    Z: [
                        " _____",
                        "|__  /",
                        "  / / ",
                        " / /_ ",
                        "/____|",
                        "      "
                    ],
                    0: [
                        "  ___  ",
                        " / _ \\ ",
                        "| | | |",
                        "| |_| |",
                        " \\___/ ",
                        "       "
                    ],
                    1: [
                        " _ ",
                        "/ |",
                        "| |",
                        "| |",
                        "|_|",
                        "   "
                    ],
                    2: [
                        " ____  ",
                        "|___ \\ ",
                        "  __) |",
                        " / __/ ",
                        "|_____|",
                        "       "
                    ],
                    3: [
                        " _____ ",
                        "|___ / ",
                        "  |_ \\ ",
                        " ___) |",
                        "|____/ ",
                        "       "
                    ],
                    4: [
                        " _  _   ",
                        "| || |  ",
                        "| || |_ ",
                        "|__   _|",
                        "   |_|  ",
                        "        "
                    ],
                    5: [
                        " ____  ",
                        "| ___| ",
                        "|___ \\ ",
                        " ___) |",
                        "|____/ ",
                        "       "
                    ],
                    6: [
                        "  __   ",
                        " / /_  ",
                        "| '_ \\ ",
                        "| (_) |",
                        " \\___/ ",
                        "       "
                    ],
                    7: [
                        " _____ ",
                        "|___  |",
                        "   / / ",
                        "  / /  ",
                        " /_/   ",
                        "       "
                    ],
                    8: [
                        "  ___  ",
                        " ( _ ) ",
                        " / _ \\ ",
                        "| (_) |",
                        " \\___/ ",
                        "       "
                    ],
                    9: [
                        "  ___  ",
                        " / _ \\ ",
                        "| (_) |",
                        " \\__, |",
                        "   /_/ ",
                        "       "
                    ],
                    " ": [
                        "  ",
                        "  ",
                        "  ",
                        "  ",
                        "  ",
                        "  "
                    ],
                    "!": [
                        " _ ",
                        "| |",
                        "| |",
                        "|_|",
                        "(_)",
                        "   "
                    ],
                    ".": [
                        "   ",
                        "   ",
                        "   ",
                        " _ ",
                        "(_)",
                        "   "
                    ],
                    ",": [
                        "   ",
                        "   ",
                        "   ",
                        " _ ",
                        "( )",
                        "|/ "
                    ],
                    "?": [
                        " ___ ",
                        "|__ \\",
                        "  / /",
                        " |_| ",
                        " (_) ",
                        "     "
                    ],
                    ":": [
                        "   ",
                        " _ ",
                        "(_)",
                        " _ ",
                        "(_)",
                        "   "
                    ],
                    ";": [
                        "   ",
                        " _ ",
                        "(_)",
                        " _ ",
                        "( )",
                        "|/ "
                    ],
                    "-": [
                        "       ",
                        "       ",
                        " _____ ",
                        "|_____|",
                        "       ",
                        "       "
                    ],
                    "_": [
                        "       ",
                        "       ",
                        "       ",
                        "       ",
                        " _____ ",
                        "|_____|"
                    ],
                    "=": [
                        "       ",
                        " _____ ",
                        "|_____|",
                        " _____ ",
                        "|_____|",
                        "       "
                    ],
                    "+": [
                        "       ",
                        "   _   ",
                        " _| |_ ",
                        "|_   _|",
                        "  |_|  ",
                        "       "
                    ],
                    "*": [
                        "       ",
                        " _/|\\_  ",
                        "  \\_/  ",
                        "  /|\\  ",
                        "       ",
                        "       "
                    ],
                    "/": [
                        "    __",
                        "   / /",
                        "  / / ",
                        " / /  ",
                        "/_/   ",
                        "      "
                    ],
                    "\\": [
                        "__    ",
                        "\\ \\   ",
                        " \\ \\  ",
                        "  \\ \\ ",
                        "   \\_\\",
                        "      "
                    ],
                    "(": [
                        "  __",
                        " / /",
                        "| | ",
                        "| | ",
                        " \\_\\",
                        "    "
                    ],
                    ")": [
                        "__  ",
                        "\\ \\ ",
                        " | |",
                        " | |",
                        "/_/ ",
                        "    "
                    ],
                    "[": [
                        " __ ",
                        "| _|",
                        "| | ",
                        "| | ",
                        "| |_",
                        "|__|"
                    ],
                    "]": [
                        " __ ",
                        "|_ |",
                        " | |",
                        " | |",
                        "_| |",
                        "|__|"
                    ],
                    "{": [
                        "  __",
                        " / /",
                        "| | ",
                        "< < ",
                        "| | ",
                        " \\_\\"
                    ],
                    "}": [
                        "__  ",
                        "\\ \\ ",
                        " | |",
                        " > >",
                        " | |",
                        "/_/ "
                    ],
                    "|": [
                        " _ ",
                        "| |",
                        "| |",
                        "| |",
                        "| |",
                        "|_|"
                    ],
                    "^": [
                        " /\\ ",
                        "|/\\|",
                        "    ",
                        "    ",
                        "    ",
                        "    "
                    ],
                    "&": [
                        "  ___   ",
                        " ( _ )  ",
                        " / _ \\/\\",
                        "| (_>  <",
                        " \\___/\\/",
                        "        "
                    ],
                };

                // Convert text to uppercase since our ASCII art is for uppercase
                text = text.toUpperCase();

                // Initialize result array with empty strings for each line
                const result = ["", "", "", "", "", ""];

                // Build each line of the ASCII art
                for (let i = 0; i < text.length; i++) {
                    const char = text[i];
                    const charArt = figletChars[char] || figletChars[" "];

                    for (let line = 0; line < 6; line++) {
                        result[line] += charArt[line];
                    }
                }

                // Join the lines with newlines
                return `<div class="figlet-output">${result.join("\n")}</div>`;
            }

            // Generate neofetch display
            function generateNeofetch() {
                // Get actual system information where possible
                const browserInfo = navigator.userAgent;
                const browserName = browserInfo.includes("Firefox") ? "Firefox" : 
                                   browserInfo.includes("Chrome") ? "Chrome" : 
                                   browserInfo.includes("Safari") ? "Safari" : 
                                   browserInfo.includes("Edge") ? "Edge" : "Unknown Browser";
                
                const osInfo = browserInfo.includes("Windows") ? "Windows" : 
                              browserInfo.includes("Mac") ? "macOS" : 
                              browserInfo.includes("Linux") ? "Linux" : 
                              browserInfo.includes("Android") ? "Android" : 
                              browserInfo.includes("iOS") ? "iOS" : "Unknown OS";
                
                const screenRes = `${window.screen.width}x${window.screen.height}`;
                const colorDepth = `${window.screen.colorDepth}-bit`;
                const language = navigator.language;
                const timeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;
                const date = new Date().toLocaleDateString();
                const time = new Date().toLocaleTimeString();
                
                // Create neofetch display
                const neofetchHTML = `<div class="neofetch-container">
                    <div class="neofetch-info">
                        <div class="neofetch-info-line">
                            <div class="neofetch-info-label">User:</div>
                            <div class="neofetch-info-value">visitor@musheer360</div>
                        </div>
                        <div class="neofetch-info-line">
                            <div class="neofetch-info-label">OS:</div>
                            <div class="neofetch-info-value">${osInfo}</div>
                        </div>
                        <div class="neofetch-info-line">
                            <div class="neofetch-info-label">Browser:</div>
                            <div class="neofetch-info-value">${browserName}</div>
                        </div>
                        <div class="neofetch-info-line">
                            <div class="neofetch-info-label">User Agent:</div>
                            <div class="neofetch-info-value">${browserInfo.substring(0, 50)}...</div>
                        </div>
                        <div class="neofetch-info-line">
                            <div class="neofetch-info-label">Resolution:</div>
                            <div class="neofetch-info-value">${screenRes}</div>
                        </div>
                        <div class="neofetch-info-line">
                            <div class="neofetch-info-label">Color Depth:</div>
                            <div class="neofetch-info-value">${colorDepth}</div>
                        </div>
                        <div class="neofetch-info-line">
                            <div class="neofetch-info-label">Language:</div>
                            <div class="neofetch-info-value">${language}</div>
                        </div>
                        <div class="neofetch-info-line">
                            <div class="neofetch-info-label">Time Zone:</div>
                            <div class="neofetch-info-value">${timeZone}</div>
                        </div>
                        <div class="neofetch-info-line">
                            <div class="neofetch-info-label">Date:</div>
                            <div class="neofetch-info-value">${date}</div>
                        </div>
                        <div class="neofetch-info-line">
                            <div class="neofetch-info-label">Time:</div>
                            <div class="neofetch-info-value">${time}</div>
                        </div>
                        <div class="neofetch-info-line">
                            <div class="neofetch-info-label">Terminal:</div>
                            <div class="neofetch-info-value">musheer360-web-terminal</div>
                        </div>
                        <div class="neofetch-info-line">
                            <div class="neofetch-info-label">Shell:</div>
                            <div class="neofetch-info-value">web-bash 5.1.16</div>
                        </div>
                        <div class="neofetch-info-line">
                            <div class="neofetch-info-label">Theme:</div>
                            <div class="neofetch-info-value">${currentTheme}</div>
                        </div>
                    </div>
                </div>`;

                return neofetchHTML;
            }

            // Start htop
            function startHtop() {
                // Create htop container
                const htopContainer = document.createElement("div");
                htopContainer.className = "htop-container";
                document.body.appendChild(htopContainer);

                // Create header
                const header = document.createElement("div");
                header.className = "htop-header";
                header.innerHTML = `<div>htop 3.2.1 - ${new Date().toLocaleString()}</div><div>Press Ctrl+C to exit</div>`;
                htopContainer.appendChild(header);

                // Create CPU bars
                const cpuBarsContainer = document.createElement("div");
                cpuBarsContainer.className = "htop-cpu-bars";
                htopContainer.appendChild(cpuBarsContainer);

                // Get actual CPU cores if available, otherwise use 4
                const cpuCores = navigator.hardwareConcurrency || 4;

                for (let i = 0; i < cpuCores; i++) {
                    const cpuBar = document.createElement("div");
                    cpuBar.className = "htop-cpu-bar";
                    cpuBar.innerHTML = `<div class="htop-cpu-usage" style="width: 0%"></div>`;
                    cpuBarsContainer.appendChild(cpuBar);
                }

                // Create memory bar
                const memoryBarContainer = document.createElement("div");
                memoryBarContainer.className = "htop-memory-bar";
                memoryBarContainer.innerHTML = `<div class="htop-memory-usage" style="width: 0%"></div>`;
                htopContainer.appendChild(memoryBarContainer);

                // Create process table
                const processTable = document.createElement("table");
                processTable.className = "htop-process-table";
                processTable.innerHTML = `
                    <thead>
                        <tr>
                            <th>PID</th>
                            <th>USER</th>
                            <th>PRI</th>
                            <th>NI</th>
                            <th>VIRT</th>
                            <th>RES</th>
                            <th>SHR</th>
                            <th>S</th>
                            <th>CPU%</th>
                            <th>MEM%</th>
                            <th>TIME+</th>
                            <th>Command</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>root</td>
                            <td>20</td>
                            <td>0</td>
                            <td>4096</td>
                            <td>1024</td>
                            <td>512</td>
                            <td>S</td>
                            <td>0.0</td>
                            <td>0.1</td>
                            <td>0:00.01</td>
                            <td>/sbin/init</td>
                        </tr>
                        <tr>
                            <td>42</td>
                            <td>musheer360</td>
                            <td>20</td>
                            <td>0</td>
                            <td>128M</td>
                            <td>42M</td>
                            <td>24M</td>
                            <td>R</td>
                            <td>2.5</td>
                            <td>1.2</td>
                            <td>0:42.00</td>
                            <td>-bash</td>
                        </tr>
                        <tr>
                            <td>142</td>
                            <td>musheer360</td>
                            <td>20</td>
                            <td>0</td>
                            <td>256M</td>
                            <td>128M</td>
                            <td>64M</td>
                            <td>S</td>
                            <td>0.8</td>
                            <td>3.2</td>
                            <td>1:15.42</td>
                            <td>vim portfolio.js</td>
                        </tr>
                        <tr>
                            <td>256</td>
                            <td>www-data</td>
                            <td>20</td>
                            <td>0</td>
                            <td>512M</td>
                            <td>128M</td>
                            <td>96M</td>
                            <td>S</td>
                            <td>1.2</td>
                            <td>3.0</td>
                            <td>2:10.15</td>
                            <td>nginx: worker process</td>
                        </tr>
                        <tr>
                            <td>321</td>
                            <td>musheer360</td>
                            <td>20</td>
                            <td>0</td>
                            <td>1.2G</td>
                            <td>400M</td>
                            <td>200M</td>
                            <td>S</td>
                            <td>4.5</td>
                            <td>9.8</td>
                            <td>3:42.67</td>
                            <td>node server.js</td>
                        </tr>
                        <tr>
                            <td>345</td>
                            <td>postgres</td>
                            <td>20</td>
                            <td>0</td>
                            <td>800M</td>
                            <td>200M</td>
                            <td>150M</td>
                            <td>S</td>
                            <td>1.0</td>
                            <td>4.9</td>
                            <td>1:30.22</td>
                            <td>postgres: main process</td>
                        </tr>
                        <tr>
                            <td>401</td>
                            <td>musheer360</td>
                            <td>20</td>
                            <td>0</td>
                            <td>350M</td>
                            <td>120M</td>
                            <td>80M</td>
                            <td>S</td>
                            <td>0.5</td>
                            <td>2.9</td>
                            <td>0:45.33</td>
                            <td>python3 data_processor.py</td>
                        </tr>
                        <tr>
                            <td>420</td>
                            <td>musheer360</td>
                            <td>20</td>
                            <td>0</td>
                            <td>69M</td>
                            <td>42M</td>
                            <td>21M</td>
                            <td>S</td>
                            <td>0.0</td>
                            <td>1.0</td>
                            <td>0:04.20</td>
                            <td>htop</td>
                        </tr>
                        <tr>
                            <td>500</td>
                            <td>root</td>
                            <td>10</td>
                            <td>-10</td>
                            <td>24M</td>
                            <td>12M</td>
                            <td>8M</td>
                            <td>S</td>
                            <td>0.1</td>
                            <td>0.3</td>
                            <td>0:30.00</td>
                            <td>[kworker/0:0]</td>
                        </tr>
                        <tr>
                            <td>512</td>
                            <td>systemd+</td>
                            <td>20</td>
                            <td>0</td>
                            <td>16M</td>
                            <td>8M</td>
                            <td>4M</td>
                            <td>S</td>
                            <td>0.0</td>
                            <td>0.2</td>
                            <td>0:05.12</td>
                            <td>systemd-networkd</td>
                        </tr>
                        <tr>
                            <td>600</td>
                            <td>musheer360</td>
                            <td>20</td>
                            <td>0</td>
                            <td>1.5G</td>
                            <td>800M</td>
                            <td>400M</td>
                            <td>S</td>
                            <td>6.0</td>
                            <td>19.5</td>
                            <td>5:30.60</td>
                            <td>firefox</td>
                        </tr>
                        <tr>
                            <td>700</td>
                            <td>musheer360</td>
                            <td>20</td>
                            <td>0</td>
                            <td>900M</td>
                            <td>450M</td>
                            <td>300M</td>
                            <td>S</td>
                            <td>3.0</td>
                            <td>10.8</td>
                            <td>2:10.70</td>
                            <td>code</td>
                        </tr>
                    </tbody>
                `;
                htopContainer.appendChild(processTable);

                // Add exit instructions
                const exitInstructions = document.createElement("div");
                exitInstructions.style.marginTop = "10px";
                exitInstructions.style.textAlign = "center";
                exitInstructions.innerHTML = "Press Ctrl+C to exit htop";
                htopContainer.appendChild(exitInstructions);

                // Update CPU and memory bars randomly to simulate activity
                function updateBars() {
                    if (commandInterrupted || currentCommand !== "htop") {
                        document.body.removeChild(htopContainer);
                        currentCommand = null;
                        addOutput("^C");
                        scrollToBottom();
                        return;
                    }

                    const cpuBars = document.querySelectorAll(".htop-cpu-usage");
                    cpuBars.forEach((bar) => {
                        const currentWidth = parseFloat(bar.style.width);
                        const newWidth = currentWidth + (Math.random() * 10 - 5);
                        bar.style.width = `${Math.max(5, Math.min(95, newWidth))}%`;
                    });

                    const memoryBar = document.querySelector(".htop-memory-usage");
                    const currentMemWidth = parseFloat(memoryBar.style.width);
                    const newMemWidth = currentMemWidth + (Math.random() * 4 - 2);
                    memoryBar.style.width = `${Math.max(30, Math.min(60, newMemWidth))}%`;

                    setTimeout(updateBars, 1000);
                }

                updateBars();
                return "";
            }

            // Event listeners
            userInput.addEventListener("input", updateFakeInput);

            // Create and append the cursor block element
            const cursorBlock = document.createElement("span");
            cursorBlock.className = "cursor-block";
            document.getElementById("input-container").appendChild(cursorBlock);

            // Function to update cursor position
            function updateCursorPosition() {
                const inputText = userInput.value;
                const textWidth = getTextWidth(inputText);
                cursorBlock.style.position = "absolute";
                cursorBlock.style.left = textWidth + "px";
                cursorBlock.style.top = "0";
                cursorBlock.style.bottom = "0";
                cursorBlock.style.height = "1.2em";
                cursorBlock.style.marginTop = "auto";
                cursorBlock.style.marginBottom = "auto";
            }

            // Helper function to calculate text width
            function getTextWidth(text) {
                const canvas = getTextWidth.canvas || (getTextWidth.canvas = document.createElement("canvas"));
                const context = canvas.getContext("2d");
                context.font = window.getComputedStyle(userInput).font;
                return context.measureText(text).width;
            }

            // Update cursor position on input
            userInput.addEventListener("input", updateCursorPosition);
            
            // Update cursor position on focus and window resize
            userInput.addEventListener("focus", updateCursorPosition);
            window.addEventListener("resize", updateCursorPosition);
            
            // Initialize cursor position
            updateCursorPosition();

            userInput.addEventListener("keydown", function (event) {
                // Command execution
                if (event.key === "Enter") {
                    const command = this.value.trim().toLowerCase();
                    handleCommand(command);
                }

                // Command history navigation
                if (event.key === "ArrowUp") {
                    if (commandHistoryArray.length > 0) {
                        commandHistoryIndex = Math.min(
                            commandHistoryIndex + 1,
                            commandHistoryArray.length - 1,
                        );
                        userInput.value =
                            commandHistoryArray[commandHistoryIndex];
                        updateFakeInput();
                        event.preventDefault();
                    }
                } else if (event.key === "ArrowDown") {
                    if (commandHistoryIndex > 0) {
                        commandHistoryIndex--;
                        userInput.value =
                            commandHistoryArray[commandHistoryIndex];
                    } else if (commandHistoryIndex === 0) {
                        commandHistoryIndex = -1;
                        userInput.value = "";
                    }
                    updateFakeInput();
                    event.preventDefault();
                }

                // Tab completion
                if (event.key === "Tab") {
                    event.preventDefault();
                    const input = userInput.value.trim().toLowerCase();

                    if (input) {
                        const possibleCommands = Object.keys(commands).filter(
                            (cmd) => cmd.startsWith(input),
                        );

                        if (possibleCommands.length === 1) {
                            userInput.value = possibleCommands[0];
                            updateFakeInput();
                        } else if (possibleCommands.length > 1) {
                            addOutput(
                                `<div class="output"><span class="highlight">${prompt} ${input}</span></div>`,
                            );
                            addOutput(possibleCommands.join("  "));
                        }
                    }
                }
            });

            document.addEventListener("keydown", function (event) {
                if (event.key === "Enter") {
                    scrollToBottom();
                }

                // Ctrl+C to interrupt commands
                if (event.ctrlKey && event.key === "c") {
                    if (currentCommand) {
                        commandInterrupted = true;
                        event.preventDefault();
                    }
                }

                // Ctrl+L to clear screen
                if (event.ctrlKey && event.key === "l") {
                    commands.clear();
                    event.preventDefault();
                }

                // Hide command history with Escape
                if (event.key === "Escape") {
                    hideCommandHistory();
                }
            });

            document.addEventListener("mousedown", (e) => {
                if (
                    e.target !== userInput &&
                    !e.target.closest(".command-history")
                ) {
                    hideCommandHistory();
                    e.preventDefault();
                    userInput.focus();
                }
            });

            userInput.addEventListener("blur", () => {
                setTimeout(() => userInput.focus(), 0);
            });

            userInput.focus();
            updateFakeInput();

            window.addEventListener("resize", () => {
                updateFakeInput();
            });

            window.addEventListener("load", scrollToBottom);

            const observer = new MutationObserver(scrollToBottom);
            observer.observe(terminal, { childList: true, subtree: true });

            function updateLayout() {
                const viewportHeight = window.visualViewport.height;
                terminal.style.height = `${viewportHeight}px`;
                scrollToBottom();
            }

            window.visualViewport.addEventListener("resize", updateLayout);
            window.addEventListener("orientationchange", updateLayout);

            updateLayout();
        </script>
    </body>
</html>
